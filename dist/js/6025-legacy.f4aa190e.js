"use strict";(self["webpackChunkai_portal"]=self["webpackChunkai_portal"]||[]).push([[6025],{96125:function(t,e,a){a.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approval-box"},[a("div",{staticClass:"message-box"},[1==this.status?a("p",{staticClass:"message-title blue"},[t._v("UNAPPROVED")]):t._e(),2==this.status?a("p",{staticClass:"message-title orange"},[t._v("PENDING")]):t._e(),3==this.status?a("p",{staticClass:"message-title green"},[t._v("APPROVED")]):t._e(),4==this.status?a("p",{staticClass:"message-title red"},[t._v("REJECTED")]):t._e(),5==this.status?a("p",{staticClass:"message-title red"},[t._v("REQUEST EDIT")]):t._e(),a("p",{staticClass:"message-text"},[t._v(t._s(t.statusText))])]),1==t.status&&"staff"==this.$store.state.user.role?a("div",{staticClass:"button-set"},[a("v-ons-toolbar-button",{staticClass:"blue",on:{click:function(e){return t.$emit("btnRequestApprove")}}},[a("i",{staticClass:"las la-reply"}),a("span",[t._v("Send Approve Request")])])],1):t._e(),2==t.status&&"manager"==this.$store.state.user.role?a("div",{staticClass:"button-set"},[a("div",{staticClass:"double-button-set"},[a("v-ons-toolbar-button",{staticClass:"green",on:{click:function(e){return t.$emit("btnApprove")}}},[a("i",{staticClass:"las la-check"}),a("span",[t._v("Approve")])]),a("v-ons-toolbar-button",{staticClass:"red",on:{click:function(e){return t.$emit("btnReject")}}},[a("i",{staticClass:"las la-times"}),a("span",[t._v("Reject")])])],1),a("v-ons-toolbar-button",{staticClass:"blue",on:{click:function(e){return t.$emit("btnRequestEdit")}}},[a("i",{staticClass:"las la-reply-all"}),a("span",[t._v("Request Edit")])])],1):t._e(),5==t.status&&"staff"==this.$store.state.user.role?a("div",{staticClass:"button-set"},[5==t.status?a("v-ons-toolbar-button",{staticClass:"red",on:{click:function(e){return t.$emit("btnResendApprove")}}},[a("i",{staticClass:"las la-reply-all"}),a("span",[t._v(" Resend Approve Request")])]):t._e()],1):t._e()])},i=[],n=(a(9653),{name:"app-approval-status",props:{status:Number},created:function(){},computed:{statusText:function(){var t=this.$store.state.user.role;return"staff"==t?1==this.status?"This record has not been sent to a section manager for an approval.":2==this.status?"This record has been sent to a section manager for an approval.":3==this.status?"This record is approved by a section manager. It cannot be edited or deleted.":4==this.status?"This record is rejected by a section manager.":5==this.status?"This record is requested review and edit by a section manager.":"N/A":"manager"==t?1==this.status?"This record has not been sent to a section manager for a review.":2==this.status?"This record is waiting for an approval feedback from a section manager.":3==this.status?"This record is approved.":4==this.status?"This record is rejected.":5==this.status?"This record has been request for editing. It is waiting for a new approval request.":"N/A":"N/A"}}}),o=n,r=a(1001),l=(0,r.Z)(o,s,i,!1,null,"99393d82",null),c=l.exports},72421:function(t,e,a){a.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-preview-wrapper"},[a("div",{staticClass:"preview-popup"},[a("v-ons-toolbar-button",{staticClass:"btn-close",on:{click:function(e){return t.CLOSE_PREVIEW()}}},[a("i",{staticClass:"las la-times"})]),a("v-ons-toolbar-button",{staticClass:"btn-close download"},[a("a",{attrs:{target:"_blank",href:t.baseURL+t.imageURL,download:""}},[a("i",{staticClass:"las la-download"})])]),a("img",{attrs:{src:t.baseURL+t.imageURL}})],1)])},i=[],n=(a(74916),a(23123),{name:"image-preview",props:{imageURL:String},computed:{baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{DOWNLOAD_IMG:function(t){var e=document.createElement("a");e.href=t,e.download=t.split("/").pop(),document.body.appendChild(e),e.click(),document.body.removeChild(e)},CLOSE_PREVIEW:function(){this.$emit("close-preview")}}}),o=n,r=a(1001),l=(0,r.Z)(o,s,i,!1,null,"1c402f72",null),c=l.exports},26025:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pm-page"},[a("div",{staticClass:"pm-toolbar"},[a("toolbar",{attrs:{pageName:"Gas Bill Record",isNewBtn:!0,newBtnLabel:"New Bill Record"},on:{refreshInfo:function(e){return t.FETCH_LIST()},newBtnFn:function(e){return t.TOGGLE_POPUP("add")}}})],1),a("div",{staticClass:"pm-page-container"},[a("div",{staticClass:"page-content page-list"},[a("DxDataGrid",{attrs:{id:"contact-client-list","data-source":t.GasBillList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!1,"show-borders":!0,"show-row-lines":!1,"row-alternation-enabled":!0},on:{exporting:t.EXPORT_DATA},scopedSlots:t._u([{key:"approval-status",fn:function(e){var s=e.data;return[a("div",{staticClass:"approval-incolumn"},[1==s.data.approve_status?a("div",{staticClass:"blue"},[a("span",[t._v(t._s(s.data.status_desc))])]):t._e(),2==s.data.approve_status?a("div",{staticClass:"orange"},[a("i",{staticClass:"las la-clock"}),a("span",[t._v(t._s(s.data.status_desc))])]):t._e(),3==s.data.approve_status?a("div",{staticClass:"green"},[a("i",{staticClass:"las la-check-double"}),a("span",[t._v(t._s(s.data.status_desc))])]):t._e(),4==s.data.approve_status?a("div",{staticClass:"red"},[a("i",{staticClass:"las la-times"}),a("span",[t._v(t._s(s.data.status_desc))])]):t._e(),5==s.data.approve_status?a("div",{staticClass:"red"},[a("i",{staticClass:"las la-pen"}),a("span",[t._v(t._s(s.data.status_desc))])]):t._e()])]}},{key:"option-btn-set",fn:function(e){var s=e.data;return[a("div",{staticClass:"table-btn-group"},[a("div",{staticClass:"table-btn",on:{click:function(e){return t.VIEW_INFO(s)}}},[a("i",{staticClass:"las la-search blue"})])])]}}])},[a("DxColumn",{attrs:{"data-field":"record_no",caption:"Record No.","sort-order":"desc"}}),a("DxColumn",{attrs:{"data-field":"bill_date","data-type":"date",format:"dd MMM, yyyy",caption:"Date"}}),a("DxColumn",{attrs:{"data-field":"price",caption:"Price",alignment:"left"}}),a("DxColumn",{attrs:{caption:"Approval Status",alignment:"center",width:150,"cell-template":"approval-status"}}),a("DxColumn",{attrs:{width:50,caption:"","cell-template":"option-btn-set"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}})],1)],1),1!=this.currentViewRow?a("div",{staticClass:"page-content page-info border-left"},[a("div",{staticClass:"pm-info-sidebar form",attrs:{id:"info-sidebar"}},[this.currentViewRow.created_by==this.$store.state.user.id_user||"manager"==this.$store.state.user.role?a("approvalBox",{attrs:{status:this.currentViewRow.approve_status},on:{btnRequestApprove:function(e){return t.APPROVE_BTN("req_approve")},btnApprove:function(e){return t.APPROVE_BTN("approve")},btnReject:function(e){return t.APPROVE_BTN("reject")},btnRequestEdit:function(e){return t.APPROVE_BTN("req_edit")},btnResendApprove:function(e){return t.APPROVE_BTN("req_approve")}}}):t._e(),a("p",{staticClass:"pm-section-label"},[t._v("Details")]),a("div",{staticClass:"form-item-container"},[t.currentViewRow.record_no?a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Bill No:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.record_no)+" ")])]):t._e(),t.gas_bill_date?a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Bill Date:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.gas_bill_date)+" ")])]):t._e(),t.currentViewRow.price?a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Price:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))+" "),t.currentViewRow.price?a("span",[t._v(" THB")]):t._e()])]):t._e(),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Receipt Image:")]),a("div",{staticClass:"img-box"},[null!=t.currentViewRow.receipt_img?a("v-ons-toolbar-button",{staticClass:"btn-preview",on:{click:function(e){return t.PREVIEW_IMG(t.currentViewRow.receipt_img)}}},[a("i",{staticClass:"las la-expand-arrows-alt"})]):t._e(),t.currentViewRow.receipt_img?a("img",{attrs:{src:this.baseURL+t.currentViewRow.receipt_img}}):t._e(),t.currentViewRow.receipt_img?t._e():a("i",{staticClass:"las la-image"}),t.currentViewRow.receipt_img?t._e():a("label",[t._v("No Image")])],1)])]),"staff"==this.$store.state.user.role&&this.currentViewRow.created_by==this.$store.state.user.id_user?a("div",{staticClass:"form-button-container"},[1==this.currentViewRow.approve_status||5==this.currentViewRow.approve_status?a("div",{staticClass:"button-set info-button-set"},[a("v-ons-toolbar-button",{on:{click:function(e){return t.TOGGLE_POPUP("edit")}}},[a("i",{staticClass:"las la-pen"}),a("span",[t._v("Edit")])]),a("v-ons-toolbar-button",{staticClass:"red",on:{click:function(e){return t.DELETE_ITEM()}}},[a("i",{staticClass:"las la-trash"}),a("span",[t._v("Delete")])])],1):t._e()]):t._e(),"manager"==this.$store.state.user.role?a("div",{staticClass:"form-button-container"},[a("div",{staticClass:"button-set info-button-set"},[a("v-ons-toolbar-button",{staticClass:"red",on:{click:function(e){return t.DELETE_ITEM()}}},[a("i",{staticClass:"las la-trash"}),a("span",[t._v("Delete")])])],1)]):t._e()],1)]):t._e()]),1==t.isAdd?a("popupAdd",{on:{"btn-cancel-add":function(e){return t.TOGGLE_POPUP("add")},refreshList:function(e){return t.FETCH_LIST()}}}):t._e(),1==t.isEdit?a("popupEdit",{attrs:{editInfo:t.editInfo},on:{"btn-cancel-edit":function(e){return t.TOGGLE_POPUP("edit")},refreshList:function(e){return t.FETCH_LIST()}}}):t._e(),1==t.isLoading?a("contentLoading",{attrs:{text:"Loading, please wait...",color:"#fc9b21"}}):t._e(),t.previewImg?a("previewImage",{attrs:{imageURL:t.previewImg},on:{"close-preview":function(e){return t.PREVIEW_IMG_CLOSE()}}}):t._e()],1)},i=[],n=(a(41539),a(71642)),o=a(53706),r=a.n(o),l=a(66262),c=a(17133),u=a.n(c),d=a(48626),p=a(39477),f=a(85981),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[a("div",{staticClass:"popup-header"},[a("label",[t._v("Add New Record")]),a("span",{staticStyle:{"font-size":"14px","padding-right":"20px"}},[t._v(t._s(t.formData.record_no)+" ")])]),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(0),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Bill Date"},model:{value:t.formData.bill_date,callback:function(e){t.$set(t.formData,"bill_date",e)},expression:"formData.bill_date"}})],1),a("div",{staticClass:"input-set"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.price,expression:"formData.price"}],attrs:{type:"text",placeholder:"Price"},domProps:{value:t.formData.price},on:{input:function(e){e.target.composing||t.$set(t.formData,"price",e.target.value)}}})])]),a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(2),a("div",{staticClass:"picture-upload-box"},[t._m(3),a("div",{staticClass:"upload-box"},[a("div",{staticClass:"upload-btn-wrapper"},[a("input",{ref:"file_img",staticStyle:{display:"none"},attrs:{type:"file",id:"preview_input_img"},on:{change:function(e){return t.PREVIEW_IMG_UPLOAD()}}}),a("v-ons-toolbar-button",[a("label",{attrs:{for:"preview_input_img"}},[a("i",{staticClass:"las la-image"}),t._v("Select File")])]),this.formData.file?a("v-ons-toolbar-button",{staticClass:"btn-delete",on:{click:function(e){return t.PREVIEW_IMG_DELETE()}}},[a("i",{staticClass:"las la-trash"})]):t._e()],1)])])])])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Bill Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Price:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Receipt Image:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preview-box"},[a("img",{attrs:{id:"preview_img",src:"",alt:""}})])}],v=(a(39714),a(47042),a(78783),a(33948),a(60285),a(41637),a(48176)),h=a.n(v),b={name:"popup-add-gasbill",components:{DxDateBox:h()},data:function(){return{formData:{id_user:"",record_no:"",bill_date:"",price:"",doc_seq:"",file:""},formSelect:{now:new Date}}},created:function(){var t=JSON.parse(localStorage.getItem("user"));this.formData.id_user=t.id_user,this.GET_LAST_SEQ_NO()},methods:{GET_LAST_SEQ_NO:function(){var t=this,e="FuelBillRecord";(0,p.Z)({method:"post",url:"/global/last-doc-seq",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{table_name:e}}).then((function(e){if(200==e.status&&e.data){var a=e.data[0].last_doc_seq;t.formData.doc_seq=null==a?1:a+1,t.formData.doc_seq<10&&(t.formData.doc_seq="0"+t.formData.doc_seq.toString()),t.CAL_DOC_NO()}})).catch((function(t){console.log(t)})).finally((function(){}))},CAL_DOC_NO:function(){var t,e=u()().month()+1,a=u()().year(),s=e.toString(),i=a.toString();1==s.length&&(s="0"+s),i=i.slice(2,4),t=s.toString()+"-"+i.toString(),this.formData.record_no="AI-GBR-"+t+"-"+this.formData.doc_seq.toString()},PREVIEW_IMG_UPLOAD:function(){this.formData.file=this.$refs.file_img.files[0];var t=this.formData.file;t&&("image/png"==t.type||"image/jpeg"==t.type?t.size<2e7?document.getElementById("preview_img").src=window.URL.createObjectURL(t):(this.$ons.notification.alert("File size too large. (20 MB max)"),this.PREVIEW_IMG_FORM_CLEAR()):(this.$ons.notification.alert("Incorrect filetype. <br/> Only PNG/JPG/JPEG file can be uploaded."),this.PREVIEW_IMG_FORM_CLEAR()))},PREVIEW_IMG_DELETE:function(){this.formData.file="",document.getElementById("preview_img").src=""},PREVIEW_IMG_FORM_CLEAR:function(){var t=document.getElementById("preview_input_img");t.val="",this.formData.file=""},SAVE:function(){var t=this;this.formData.bill_date?this.formData.price?this.$ons.notification.confirm("Confirm save?").then((function(e){if(1==e){var a=t.formData;(0,p.Z)({method:"post",url:"/fuel-bill/fuel-bill-add",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){200==e.status&&(t.$ons.notification.alert("Bill Record Add successful"),t.$emit("btn-cancel-add"),t.$emit("refreshList"))})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))}})):this.$ons.notification.alert('"Price" field cannot be empty'):this.$ons.notification.alert('"Bill Date" field cannot be empty')},CANCEL:function(){var t=this,e=this.formData;this.formData!=e?this.$ons.notification.confirm("Your unsaved changes will be lost").then((function(e){1==e&&t.$emit("btn-cancel-add")})):this.$emit("btn-cancel-add")}}},g=b,C=a(1001),E=(0,C.Z)(g,m,_,!1,null,"b66f7a2a",null),w=E.exports,R=a(31323),D=a(49075),I=a(89584),P=a(72421),L=a(96125),x={name:"ViewGasReceipt",components:{toolbar:f.Z,DxDataGrid:d.DxDataGrid,DxSearchPanel:d.DxSearchPanel,DxPaging:d.DxPaging,DxPager:d.DxPager,DxScrolling:d.DxScrolling,DxColumn:d.DxColumn,previewImage:P.Z,contentLoading:D.Z,popupAdd:w,popupEdit:R.Z,approvalBox:L.Z},created:function(){this.$store.commit("UPDATE_CURRENT_INAPP",{name:"Gas Bill Record",icon:"/img/icon_menu/record/gas.png"}),this.FETCH_LIST()},data:function(){return{isAdd:!1,isEdit:!1,isLoading:!1,currentViewRow:1,errorMessage:"",editInfo:"",previewImg:"",GasBillList:[]}},computed:{gas_bill_date:function(){return u()(this.currentViewRow.bill_date).format("LL")},baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{EXPORT_DATA:function(t){var e=new n.Workbook,a=e.addWorksheet("Clients");(0,l.d)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){r()(new Blob([t],{type:"application/octet-stream"}),"Clients.xlsx")}))})),t.cancel=!0},VIEW_INFO:function(t){this.currentViewRow=t.data,this.SCROLL_TOP_INFO()},DELETE_ITEM:function(){var t=this;this.$ons.notification.confirm("Confirm delete?").then((function(e){1==e&&(0,p.Z)({method:"delete",url:"/fuel-bill/fuel-bill-delete",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_fuel_bill:t.currentViewRow.id_fuel_bill}}).then((function(e){console.log(e),200==e.status&&(t.$ons.notification.alert("Delete successful"),t.FETCH_LIST())})).catch((function(t){console.log(t)})).finally((function(){}))}))},CLEAR_VIEW_INFO:function(){this.currentViewRow=""},TOGGLE_POPUP:function(t){"add"==t?1==this.isAdd?this.isAdd=!1:this.isAdd=!0:"edit"==t&&(1==this.isEdit?this.isEdit=!1:(this.editInfo=(0,I.Z)(this.currentViewRow),this.isEdit=!0))},FETCH_LIST:function(){var t=this;this.currentViewRow,this.isLoading=!0,(0,p.Z)({method:"get",url:"/fuel-bill/fuel-bill-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){e.data&&(t.GasBillList=e.data,t.GasBillList.length>0&&(t.currentViewRow=t.GasBillList[t.GasBillList.length-1]))})).catch((function(t){console.log(t)})).finally((function(){t.isLoading=!1}))},SCROLL_TOP_INFO:function(){""!=this.currentViewRow&&document.getElementById("info-sidebar").scroll({top:0,behavior:"smooth"})},PREVIEW_IMG:function(t){t&&(this.previewImg=t)},PREVIEW_IMG_CLOSE:function(){this.previewImg=""},APPROVE_BTN:function(t){var e=this,a=JSON.parse(localStorage.getItem("user")),s="N/A",i={id_fuel_bill:this.currentViewRow.id_fuel_bill,approve_status:0,id_user:a.id_user};"req_approve"==t?(i.approve_status=2,s="Confirm Send Approve Request?"):"approve"==t?(i.approve_status=3,s="Confirm Send Approve Feedback?"):"reject"==t?(i.approve_status=4,s="Confirm Send Reject Feedback?"):"req_edit"==t&&(i.approve_status=5,s="Confirm Send Request Edit Feedback?"),this.$ons.notification.confirm(s).then((function(t){1==t&&(0,p.Z)({method:"put",url:"/fuel-bill/fuel-bill-status",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:i}).then((function(t){console.log(t),200==t.status&&(e.$ons.notification.alert("Approval Status Sent"),e.FETCH_LIST())})).catch((function(t){console.log(t)})).finally((function(){}))}))}}},$=x,S=(0,C.Z)($,s,i,!1,null,"62e69840",null),A=S.exports},31323:function(t,e,a){a.d(e,{Z:function(){return f}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[t._m(0),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(1),a("p",{staticClass:"info"},[t._v(" "+t._s(t.formData.record_no)+" ")])]),a("div",{staticClass:"input-set"},[t._m(2),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Bill Date"},model:{value:t.formData.bill_date,callback:function(e){t.$set(t.formData,"bill_date",e)},expression:"formData.bill_date"}})],1),a("div",{staticClass:"input-set"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.price,expression:"formData.price"}],attrs:{type:"text",placeholder:"Price"},domProps:{value:t.formData.price},on:{input:function(e){e.target.composing||t.$set(t.formData,"price",e.target.value)}}})])]),a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(4),a("div",{staticClass:"picture-upload-box"},[t._m(5),a("div",{staticClass:"upload-box"},[a("div",{staticClass:"upload-btn-wrapper"},[a("input",{ref:"file_img",staticStyle:{display:"none"},attrs:{type:"file",id:"preview_input_img"},on:{change:function(e){return t.PREVIEW_IMG_UPLOAD()}}}),a("v-ons-toolbar-button",[a("label",{attrs:{for:"preview_input_img"}},[a("i",{staticClass:"las la-image"}),t._v("Select File")])]),a("v-ons-toolbar-button",{staticClass:"btn-delete",on:{click:function(e){return t.PREVIEW_IMG_DELETE()}}},[a("i",{staticClass:"las la-trash"})])],1)])])])])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-header"},[a("label",[t._v("Edit Record")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Record No:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Bill Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Price:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Receipt Image:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preview-box"},[a("img",{attrs:{id:"preview_img",src:"",alt:""}})])}],n=(a(41539),a(78783),a(33948),a(60285),a(41637),a(39477)),o=a(89584),r=a(48176),l=a.n(r),c={name:"popup-edit-gasbill",components:{DxDateBox:l()},props:{editInfo:Object},data:function(){return{formData:{},formSelect:{now:new Date}}},computed:{baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},created:function(){this.formData=(0,o.Z)(this.editInfo);var t=JSON.parse(localStorage.getItem("user"));this.formData.id_user=t.id_user,this.formData.doc_seq=parseInt(this.formData.doc_seq)},mounted:function(){null!=this.formData.receipt_img&&(document.getElementById("preview_img").src=this.baseURL+this.formData.receipt_img)},methods:{PREVIEW_IMG_UPLOAD:function(){this.formData.file=this.$refs.file_img.files[0];var t=this.formData.file;t&&("image/png"==t.type||"image/jpeg"==t.type?t.size<2e7?document.getElementById("preview_img").src=window.URL.createObjectURL(t):(this.$ons.notification.alert("File size too large. (20 MB max)"),this.PREVIEW_IMG_FORM_CLEAR()):(this.$ons.notification.alert("Incorrect filetype. <br/> Only PNG/JPG/JPEG file can be uploaded."),this.PREVIEW_IMG_FORM_CLEAR()))},PREVIEW_IMG_DELETE:function(){this.formData.file=null,this.formData.receipt_img=null,document.getElementById("preview_img").src=""},PREVIEW_IMG_FORM_CLEAR:function(){var t=document.getElementById("preview_input_img");t.val="",this.formData.file=null},SAVE:function(){var t=this;this.formData.bill_date?this.formData.price?this.$ons.notification.confirm("Confirm save?").then((function(e){if(1==e){var a=t.formData;(0,n.Z)({method:"put",url:"/fuel-bill/fuel-bill-edit",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){200==e.status&&(t.$ons.notification.alert("Bill Record Edit successful"),t.$emit("btn-cancel-edit"),t.$emit("refreshList"))})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))}})):this.$ons.notification.alert('"Price" field cannot be empty'):this.$ons.notification.alert('"Bill Date" field cannot be empty')},CANCEL:function(){var t=this,e=this.formData;this.formData!=e?this.$ons.notification.confirm("Your unsaved changes will be lost").then((function(e){1==e&&t.$emit("btn-cancel-edit")})):this.$emit("btn-cancel-edit")}}},u=c,d=a(1001),p=(0,d.Z)(u,s,i,!1,null,"787961ae",null),f=p.exports}}]);
//# sourceMappingURL=6025-legacy.f4aa190e.js.map