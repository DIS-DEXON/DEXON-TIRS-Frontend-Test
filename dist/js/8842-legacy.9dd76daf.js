"use strict";(self["webpackChunkai_portal"]=self["webpackChunkai_portal"]||[]).push([[8842],{48842:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pm-page"},[a("div",{staticClass:"pm-toolbar"},[a("toolbar",{attrs:{pageSubName:"Record No. "+t.info.record_no,isBack:!0,isSave:!0,isDelete:!0},on:{isDeleteBtn:function(e){return t.DELETE()},isSaveBtn:function(e){return t.SAVE_EDIT()},refreshInfo:function(e){return t.FETCH_INFO()}}})],1),a("div",{staticClass:"pm-page-container"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-report"},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(0),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Start Date"},model:{value:t.info.start_date,callback:function(e){t.$set(t.info,"start_date",e)},expression:"info.start_date"}})],1),a("div",{staticClass:"input-set"},[t._m(1),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"End Date"},model:{value:t.info.end_date,callback:function(e){t.$set(t.info,"end_date",e)},expression:"info.end_date"}})],1)])]),a("mc-wysiwyg",{staticClass:"text-editor",model:{value:t.info.report_message,callback:function(e){t.$set(t.info,"report_message",e)},expression:"info.report_message"}})],1)])]),1==t.isEdit?a("popupEdit",{attrs:{editInfo:t.info},on:{closePopup:function(e){return t.TOGGLE_POPUP()},refreshInfo:function(e){return t.FETCH_INFO()}}}):t._e()],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Start Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("End Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])}],n=(a(41539),a(85981)),i=a(30855),r=a(48176),l=a.n(r),c=a(39477),u={name:"ViewWeeklyReportInfo",components:{toolbar:n.Z,popupEdit:i.Z,DxDateBox:l()},created:function(){1==this.$store.state.status.server&&this.FETCH_INFO()},data:function(){return{info:{},isEdit:!1,formSelect:{now:new Date}}},methods:{FETCH_INFO:function(){var t=this,e=this.$route.params;e&&(0,c.Z)({method:"post",url:"/weekly-report/get-weekly-report",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e}).then((function(e){200==e.status&&e.data[0]&&(t.info=e.data[0])})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))},TOGGLE_POPUP:function(){this.isEdit=!this.isEdit},SAVE_EDIT:function(){var t=this;this.$ons.notification.confirm("Confirm Save?").then((function(e){var a={id_user:t.$store.state.user.id_user,id_weekly:t.info.id_weekly,report_message:t.info.report_message,start_date:t.info.start_date,end_date:t.info.end_date};1==e&&(0,c.Z)({method:"put",url:"/weekly-report/weekly-report-edit",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){200==e.status&&(t.$ons.notification.alert("Save Successful"),t.FETCH_INFO())})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))}))},DELETE:function(){var t=this;this.$ons.notification.confirm("Confirm Delete Record?").then((function(e){var a={id_weekly:t.info.id_weekly};1==e&&(0,c.Z)({method:"delete",url:"/weekly-report/weekly-report-delete",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){200==e.status&&(t.$ons.notification.alert("Delete Successful"),t.$router.go(-1))})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))}))}},computed:{baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}}},p=u,m=a(1001),f=(0,m.Z)(p,o,s,!1,null,"2898e2ad",null),d=f.exports},30855:function(t,e,a){a.d(e,{Z:function(){return v}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[t._m(0),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("label",{staticClass:"section-text",staticStyle:{"grid-column":"span 2"}},[t._v("Project Informations")]),a("div",{staticClass:"input-set",staticStyle:{"grid-column":"span 2"}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_name,expression:"formData.project_name"}],attrs:{type:"text",placeholder:"Project Name"},domProps:{value:t.formData.project_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_name",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_no,expression:"formData.project_no"}],attrs:{type:"text",placeholder:"Project Number"},domProps:{value:t.formData.project_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_value,expression:"formData.project_value"}],attrs:{type:"text",placeholder:"Project Value (Baht)"},domProps:{value:t.formData.project_value},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_value",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Purchase Order No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.po_no,expression:"formData.po_no"}],attrs:{type:"text",placeholder:"Purchase Order No"},domProps:{value:t.formData.po_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"po_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Quotation No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.quotation_no,expression:"formData.quotation_no"}],attrs:{type:"text",placeholder:"Quotation No"},domProps:{value:t.formData.quotation_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"quotation_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(4),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Job Start Date"},model:{value:t.formData.job_start_date,callback:function(e){t.$set(t.formData,"job_start_date",e)},expression:"formData.job_start_date"}})],1),a("div",{staticClass:"input-set"},[t._m(5),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Job End Date"},model:{value:t.formData.job_end_date,callback:function(e){t.$set(t.formData,"job_end_date",e)},expression:"formData.job_end_date"}})],1),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Job Type:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.job_type,expression:"formData.job_type"}],attrs:{type:"text",placeholder:"Ex: H-N-D-RBI"},domProps:{value:t.formData.job_type},on:{input:function(e){e.target.composing||t.$set(t.formData,"job_type",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(6),a("DxSelectBox",{staticStyle:{border:"0","font-size":"14px"},attrs:{"data-source":t.formSelect.serviceTypeList,"display-expr":"service_type_desc","value-expr":"id_service_type"},model:{value:t.formData.service_type,callback:function(e){t.$set(t.formData,"service_type",e)},expression:"formData.service_type"}})],1),a("label",{staticClass:"section-text",staticStyle:{"grid-column":"span 2"}},[t._v("Client Informations")]),a("div",{staticClass:"input-set"},[t._m(7),a("DxLookup",{attrs:{items:t.formSelect.clientList,"formSelect.clientList":"",value:"Select Client","value-expr":"id_client","display-expr":"client_name"},model:{value:t.formData.id_client,callback:function(e){t.$set(t.formData,"id_client",e)},expression:"formData.id_client"}},[a("DxDropDownOptions",{attrs:{"show-title":!1}})],1)],1),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Contact Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_name,expression:"formData.client_contact_name"}],attrs:{type:"text",placeholder:"Contact Name"},domProps:{value:t.formData.client_contact_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_name",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Phone No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_phone_no,expression:"formData.client_contact_phone_no"}],attrs:{type:"text",placeholder:"Contact Phone No"},domProps:{value:t.formData.client_contact_phone_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_phone_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_email,expression:"formData.client_contact_email"}],attrs:{type:"text",placeholder:"Contact Email"},domProps:{value:t.formData.client_contact_email},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_email",e.target.value)}}})])])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-header"},[a("label",[t._v("Edit Project Info")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project Name:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project No:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project Value (Baht):")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Job Start Date:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Job End Date:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Service Type:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Client:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])}],n=(a(41539),a(39477)),i=a(56935),r=a.n(i),l=a(48176),c=a.n(l),u=a(89584),p=a(18017),m={name:"popup-edit-project",components:{DxSelectBox:r(),DxDateBox:c(),DxLookup:p.DxLookup,DxDropDownOptions:p.DxDropDownOptions},props:{editInfo:Object},created:function(){this.FETCH_DROPDOWN(),this.formData=(0,u.Z)(this.editInfo)},data:function(){return{formData:{project_no:"",project_name:"",po_no:"",quotation_no:"",job_type:"",job_confirm_date:"",job_start_date:"",job_end_date:"",job_start_hour:"",job_end_hour:"",est_work_finish:"",id_client:"",client_contact_name:"",client_contact_phone_no:"",client_contact_email:""},formSelect:{jobType:[],serviceTypeList:[],now:new Date,clientList:[{}]}}},methods:{SAVE:function(){var t=this;this.formData.project_name?this.formData.project_no?this.formData.id_client>=0?this.$ons.notification.confirm("Confirm save?").then((function(e){if(1==e){var a=t.formData;(0,n.Z)({method:"put",url:"/project-manager/project-edit",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){200==e.status&&(t.$ons.notification.alert("Edit successful"),t.$emit("closePopup"),t.$emit("refreshInfo"))})).catch((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)})).finally((function(){}))}})):this.$ons.notification.alert('"Client" field cannot be empty'):this.$ons.notification.alert('"Project No" field cannot be empty'):this.$ons.notification.alert('"Project Name" field cannot be empty')},CANCEL:function(){var t=this;this.formData!=this.formData?this.$ons.notification.confirm("Your unsaved changes will be lost").then((function(e){1==e&&t.$emit("closePopup")})):this.$emit("closePopup")},FETCH_DROPDOWN:function(){var t=this;(0,n.Z)({method:"get",url:"/project-manager/client-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){e.data&&(t.formSelect.clientList=e.data)})),(0,n.Z)({method:"get",url:"/service-type/service-type-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){e.data&&(t.formSelect.serviceTypeList=e.data)}))}}},f=m,d=a(1001),_=(0,d.Z)(f,o,s,!1,null,"51fe3826",null),v=_.exports},89584:function(t,e,a){a.d(e,{Z:function(){return s}});var o=a(68932),s=(a(47042),a(41539),a(70189),a(78783),a(33948),a(21249),a(51532),a(24603),a(28450),a(74916),a(88386),a(39714),a(92087),a(69600),n);function n(t){var e=t,a={}.toString.call(t).slice(8,-1);if("Set"==a)return new Set((0,o.Z)(t).map((function(t){return n(t)})));if("Map"==a)return new Map((0,o.Z)(t).map((function(t){return[n(t[0]),n(t[1])]})));if("Date"==a)return new Date(t.getTime());if("RegExp"==a)return RegExp(t.source,i(t));if("Array"==a||"Object"==a)for(var s in e=Array.isArray(t)?[]:{},t)e[s]=n(t[s]);return e}function i(t){if("string"==typeof t.source.flags)return t.source.flags;var e=[];return t.global&&e.push("g"),t.ignoreCase&&e.push("i"),t.multiline&&e.push("m"),t.sticky&&e.push("y"),t.unicode&&e.push("u"),e.join("")}}}]);
//# sourceMappingURL=8842-legacy.9dd76daf.js.map