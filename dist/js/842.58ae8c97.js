"use strict";(self["webpackChunkai_portal"]=self["webpackChunkai_portal"]||[]).push([[842],{48842:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pm-page"},[a("div",{staticClass:"pm-toolbar"},[a("toolbar",{attrs:{pageSubName:"Record No. "+t.info.record_no,isBack:!0,isSave:!0,isDelete:!0},on:{isDeleteBtn:function(e){return t.DELETE()},isSaveBtn:function(e){return t.SAVE_EDIT()},refreshInfo:function(e){return t.FETCH_INFO()}}})],1),a("div",{staticClass:"pm-page-container"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-report"},[a("div",{staticClass:"form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[t._m(0),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Start Date"},model:{value:t.info.start_date,callback:function(e){t.$set(t.info,"start_date",e)},expression:"info.start_date"}})],1),a("div",{staticClass:"input-set"},[t._m(1),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"End Date"},model:{value:t.info.end_date,callback:function(e){t.$set(t.info,"end_date",e)},expression:"info.end_date"}})],1)])]),a("mc-wysiwyg",{staticClass:"text-editor",model:{value:t.info.report_message,callback:function(e){t.$set(t.info,"report_message",e)},expression:"info.report_message"}})],1)])]),1==t.isEdit?a("popupEdit",{attrs:{editInfo:t.info},on:{closePopup:function(e){return t.TOGGLE_POPUP()},refreshInfo:function(e){return t.FETCH_INFO()}}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Start Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("End Date:")]),a("span",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])}],i=a(85981),n=a(30855),r=a(48176),l=a.n(r),c=a(39477),p={name:"ViewWeeklyReportInfo",components:{toolbar:i.Z,popupEdit:n.Z,DxDateBox:l()},created(){1==this.$store.state.status.server&&this.FETCH_INFO()},data(){return{info:{},isEdit:!1,formSelect:{now:new Date}}},methods:{FETCH_INFO(){const t=this.$route.params;t&&(0,c.Z)({method:"post",url:"/weekly-report/get-weekly-report",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t}).then((t=>{200==t.status&&t.data[0]&&(this.info=t.data[0])})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))},TOGGLE_POPUP(){this.isEdit=!this.isEdit},SAVE_EDIT(){this.$ons.notification.confirm("Confirm Save?").then((t=>{const e={id_user:this.$store.state.user.id_user,id_weekly:this.info.id_weekly,report_message:this.info.report_message,start_date:this.info.start_date,end_date:this.info.end_date};1==t&&(0,c.Z)({method:"put",url:"/weekly-report/weekly-report-edit",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e}).then((t=>{200==t.status&&(this.$ons.notification.alert("Save Successful"),this.FETCH_INFO())})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))}))},DELETE(){this.$ons.notification.confirm("Confirm Delete Record?").then((t=>{const e={id_weekly:this.info.id_weekly};1==t&&(0,c.Z)({method:"delete",url:"/weekly-report/weekly-report-delete",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e}).then((t=>{200==t.status&&(this.$ons.notification.alert("Delete Successful"),this.$router.go(-1))})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))}))}},computed:{baseURL(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}}},u=p,m=a(1001),d=(0,m.Z)(u,s,o,!1,null,"2898e2ad",null),f=d.exports},30855:function(t,e,a){a.d(e,{Z:function(){return v}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[t._m(0),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("label",{staticClass:"section-text",staticStyle:{"grid-column":"span 2"}},[t._v("Project Informations")]),a("div",{staticClass:"input-set",staticStyle:{"grid-column":"span 2"}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_name,expression:"formData.project_name"}],attrs:{type:"text",placeholder:"Project Name"},domProps:{value:t.formData.project_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_name",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_no,expression:"formData.project_no"}],attrs:{type:"text",placeholder:"Project Number"},domProps:{value:t.formData.project_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_value,expression:"formData.project_value"}],attrs:{type:"text",placeholder:"Project Value (Baht)"},domProps:{value:t.formData.project_value},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_value",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Purchase Order No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.po_no,expression:"formData.po_no"}],attrs:{type:"text",placeholder:"Purchase Order No"},domProps:{value:t.formData.po_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"po_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Quotation No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.quotation_no,expression:"formData.quotation_no"}],attrs:{type:"text",placeholder:"Quotation No"},domProps:{value:t.formData.quotation_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"quotation_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(4),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Job Start Date"},model:{value:t.formData.job_start_date,callback:function(e){t.$set(t.formData,"job_start_date",e)},expression:"formData.job_start_date"}})],1),a("div",{staticClass:"input-set"},[t._m(5),a("DxDateBox",{attrs:{value:t.formSelect.now,type:"date",placeholder:"Job End Date"},model:{value:t.formData.job_end_date,callback:function(e){t.$set(t.formData,"job_end_date",e)},expression:"formData.job_end_date"}})],1),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Job Type:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.job_type,expression:"formData.job_type"}],attrs:{type:"text",placeholder:"Ex: H-N-D-RBI"},domProps:{value:t.formData.job_type},on:{input:function(e){e.target.composing||t.$set(t.formData,"job_type",e.target.value)}}})]),a("div",{staticClass:"input-set"},[t._m(6),a("DxSelectBox",{staticStyle:{border:"0","font-size":"14px"},attrs:{"data-source":t.formSelect.serviceTypeList,"display-expr":"service_type_desc","value-expr":"id_service_type"},model:{value:t.formData.service_type,callback:function(e){t.$set(t.formData,"service_type",e)},expression:"formData.service_type"}})],1),a("label",{staticClass:"section-text",staticStyle:{"grid-column":"span 2"}},[t._v("Client Informations")]),a("div",{staticClass:"input-set"},[t._m(7),a("DxLookup",{attrs:{items:t.formSelect.clientList,"formSelect.clientList":"",value:"Select Client","value-expr":"id_client","display-expr":"client_name"},model:{value:t.formData.id_client,callback:function(e){t.$set(t.formData,"id_client",e)},expression:"formData.id_client"}},[a("DxDropDownOptions",{attrs:{"show-title":!1}})],1)],1),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Contact Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_name,expression:"formData.client_contact_name"}],attrs:{type:"text",placeholder:"Contact Name"},domProps:{value:t.formData.client_contact_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_name",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Phone No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_phone_no,expression:"formData.client_contact_phone_no"}],attrs:{type:"text",placeholder:"Contact Phone No"},domProps:{value:t.formData.client_contact_phone_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_phone_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_contact_email,expression:"formData.client_contact_email"}],attrs:{type:"text",placeholder:"Contact Email"},domProps:{value:t.formData.client_contact_email},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_contact_email",e.target.value)}}})])])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-header"},[a("label",[t._v("Edit Project Info")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project Name:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project No:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Project Value (Baht):")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Job Start Date:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Job End Date:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Service Type:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-box"},[a("p",{staticClass:"label"},[t._v("Client:")]),a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])])}],i=a(39477),n=a(56935),r=a.n(n),l=a(48176),c=a.n(l),p=a(89584),u=a(18017),m={name:"popup-edit-project",components:{DxSelectBox:r(),DxDateBox:c(),DxLookup:u.DxLookup,DxDropDownOptions:u.DxDropDownOptions},props:{editInfo:Object},created(){this.FETCH_DROPDOWN(),this.formData=(0,p.Z)(this.editInfo)},data(){return{formData:{project_no:"",project_name:"",po_no:"",quotation_no:"",job_type:"",job_confirm_date:"",job_start_date:"",job_end_date:"",job_start_hour:"",job_end_hour:"",est_work_finish:"",id_client:"",client_contact_name:"",client_contact_phone_no:"",client_contact_email:""},formSelect:{jobType:[],serviceTypeList:[],now:new Date,clientList:[{}]}}},methods:{SAVE(){this.formData.project_name?this.formData.project_no?this.formData.id_client>=0?this.$ons.notification.confirm("Confirm save?").then((t=>{if(1==t){const t=this.formData;(0,i.Z)({method:"put",url:"/project-manager/project-edit",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t}).then((t=>{200==t.status&&(this.$ons.notification.alert("Edit successful"),this.$emit("closePopup"),this.$emit("refreshInfo"))})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))}})):this.$ons.notification.alert('"Client" field cannot be empty'):this.$ons.notification.alert('"Project No" field cannot be empty'):this.$ons.notification.alert('"Project Name" field cannot be empty')},CANCEL(){this.formData!=this.formData?this.$ons.notification.confirm("Your unsaved changes will be lost").then((t=>{1==t&&this.$emit("closePopup")})):this.$emit("closePopup")},FETCH_DROPDOWN(){(0,i.Z)({method:"get",url:"/project-manager/client-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((t=>{t.data&&(this.formSelect.clientList=t.data)})),(0,i.Z)({method:"get",url:"/service-type/service-type-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((t=>{t.data&&(this.formSelect.serviceTypeList=t.data)}))}}},d=m,f=a(1001),_=(0,f.Z)(d,s,o,!1,null,"51fe3826",null),v=_.exports},89584:function(t,e,a){a.d(e,{Z:function(){return s}});var s=o;function o(t){let e=t;var a={}.toString.call(t).slice(8,-1);if("Set"==a)return new Set([...t].map((t=>o(t))));if("Map"==a)return new Map([...t].map((t=>[o(t[0]),o(t[1])])));if("Date"==a)return new Date(t.getTime());if("RegExp"==a)return RegExp(t.source,i(t));if("Array"==a||"Object"==a)for(var s in e=Array.isArray(t)?[]:{},t)e[s]=o(t[s]);return e}function i(t){if("string"==typeof t.source.flags)return t.source.flags;var e=[];return t.global&&e.push("g"),t.ignoreCase&&e.push("i"),t.multiline&&e.push("m"),t.sticky&&e.push("y"),t.unicode&&e.push("u"),e.join("")}}}]);
//# sourceMappingURL=842.58ae8c97.js.map