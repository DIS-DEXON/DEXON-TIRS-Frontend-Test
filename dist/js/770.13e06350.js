"use strict";(self["webpackChunkai_portal"]=self["webpackChunkai_portal"]||[]).push([[770],{19852:function(t,e,a){a.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-loading"},[a("div",{staticClass:"box"},[a("hash-loader",{staticClass:"custom-class",attrs:{color:"#eb1851",loading:!0,size:40,sizeUnit:"px"}}),a("h5",{staticClass:"app-name"},[t._v(t._s(t.text))])],1)])},n=[],o={name:"app-user-logging-in",props:{text:String}},r=o,i=a(1001),l=(0,i.Z)(r,s,n,!1,null,"73613f3f",null),u=l.exports},99986:function(t,e,a){a.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default")],2)},n=[],o={name:"LayoutMain",components:{}},r=o,i=a(1001),l=(0,i.Z)(r,s,n,!1,null,null,null),u=l.exports},31770:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body",attrs:{id:"page-login"}},[t._m(0),a("div",{staticClass:"login-panel"},[a("div",{staticClass:"app-logo"},[a("img",{attrs:{src:t.appIcon,alt:"app icon"}})]),a("h1",[t._v("AIM")]),a("label",{staticClass:"sub-title"},[t._v("Asset Integrity Management")]),a("div",{staticClass:"form-login"},[a("div",{staticClass:"input-set"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"user",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.formData.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SIGN_IN()},input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"password",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.formData.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SIGN_IN()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"button-set",staticStyle:{"margin-top":"40px"}},[a("button",{staticClass:"blue",on:{click:function(e){return t.SIGN_IN()}}},[a("label",[t._v("Sign in")])])]),t._m(1)])]),1==t.isLoading?a("PageLoading",{attrs:{text:"Logging In"}}):t._e(),a("div",{staticClass:"bg-filter"})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-logo-login"},[a("img",{attrs:{src:"/img/logo-dark.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"help-label"},[a("label",[t._v("Need helps? Visit "),a("a",[t._v("Help Center")])])])}],o=a(39477),r=a(45549),i=a(99986),l=a(19852),u={name:"Login-View",components:{PageLoading:l.Z},data(){return{formData:{username:"",password:""},appIcon:this.$store.state.appIcon,isLoggedIn:localStorage.getItem("user"),isLoading:!1}},created(){this.$emit("update:layout",i.Z),this.$store.commit("CLEAR_CURRENT_INAPP"),this.isLoggedIn&&this.$router.push("/")},methods:{SIGN_IN(){this.formData.username?this.formData.password?(this.isLoading=!0,setTimeout((()=>{var t=(0,r.sha256)(this.formData.password),e=this.formData.username.toLowerCase();(0,o.Z)({method:"post",url:"/user/login",data:{username:e,password:t}}).then((t=>{t.data.user&&t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("token",JSON.stringify(t.data.token)),console.log(t.data.user),"ceo"==t.data.user.role?this.$router.push("/executive-report"):this.$router.push("/"))})).catch((t=>{t.response?(t.response.data&&this.$ons.notification.alert(t.response.data.message),0==t.response.status&&this.$ons.notification.alert("Cannot connect to a server.<br/> Please try again later.")):console.log(t)})).finally((()=>{this.isLoading=!1}))}),500)):this.$ons.notification.alert('"Password" cannot be empty'):this.$ons.notification.alert('"Username" cannot be empty')}}},c=u,p=a(1001),d=(0,p.Z)(c,s,n,!1,null,"549b35aa",null),m=d.exports}}]);
//# sourceMappingURL=770.13e06350.js.map