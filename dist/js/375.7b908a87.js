"use strict";(self["webpackChunkai_portal"]=self["webpackChunkai_portal"]||[]).push([[375],{85981:function(t,e,a){a.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app-toolbar"}},[a("div",{staticClass:"left-col"},[t.isBack?a("v-ons-toolbar-button",{on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"las la-angle-left"}),a("span",[t._v("Back")])]):t._e(),a("h1",[t._v(t._s(t.pageName))]),a("h2",[t._v(t._s(t.pageSubName))])],1),a("div",{staticClass:"right-col"},[t.isSave?a("v-ons-toolbar-button",{staticClass:"highlight-btn",on:{click:function(e){return t.$emit("isSaveBtn")}}},[a("i",{staticClass:"las la-save"}),a("span",[t._v("Save")])]):t._e(),t.isEdit?a("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("isEditBtn")}}},[a("i",{staticClass:"las la-edit"}),a("span",[t._v("Edit")])]):t._e(),t.isDelete?a("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("isDeleteBtn")}}},[a("i",{staticClass:"las la-trash"}),a("span",[t._v("Delete")])]):t._e(),t.isPrint||t.isDownload?a("div",{staticClass:"btn-group-separater"}):t._e(),a("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("refreshInfo")}}},[a("i",{staticClass:"las la-sync"}),a("span",[t._v("Refresh")])]),t.isPrint?a("v-ons-toolbar-button",[a("i",{staticClass:"las la-print"}),a("span",[t._v("Print")])]):t._e(),t.isDownload?a("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("isDownloadBtn")}}},[a("i",{staticClass:"las la-download"}),a("span",[t._v("Download")])]):t._e(),t.isNewBtn?a("v-ons-toolbar-button",{on:{click:function(e){return t.$emit("newBtnFn")}}},[a("i",{staticClass:"las la-plus"}),a("span",[t._v(t._s(t.newBtnLabel))])]):t._e()],1)])},i=[],n={name:"toolbar",props:{pageName:String,pageSubName:String,isBack:Boolean,isEdit:Boolean,isSave:Boolean,isDelete:Boolean,isPrint:Boolean,isDownload:Boolean,isNewBtn:Boolean,newBtnLabel:String},methods:{}},o=n,l=a(1001),r=(0,l.Z)(o,s,i,!1,null,"47efdae0",null),c=r.exports},45375:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pm-page"},[a("div",{staticClass:"pm-toolbar"},[a("toolbar",{attrs:{pageName:"Client Contact",isNewBtn:!0,newBtnLabel:"New Client Info"},on:{refreshInfo:function(e){return t.FETCH_LIST()},newBtnFn:function(e){return t.TOGGLE_POPUP("add")}}})],1),a("div",{staticClass:"pm-page-container"},[a("div",{staticClass:"page-content page-list"},[a("DxDataGrid",{attrs:{id:"contact-client-list","data-source":t.clientList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!1,"show-borders":!0,"show-row-lines":!1,"row-alternation-enabled":!0},on:{exporting:t.EXPORT_DATA},scopedSlots:t._u([{key:"option-btn-set",fn:function(e){var s=e.data;return[a("div",{staticClass:"table-btn-group"},[a("div",{staticClass:"table-btn",on:{click:function(e){return t.VIEW_INFO(s)}}},[a("i",{staticClass:"las la-search blue"})])])]}}])},[a("DxColumn",{attrs:{"data-field":"client_name",caption:"Client Name"}}),a("DxColumn",{attrs:{"data-field":"location",caption:"Location"}}),a("DxColumn",{attrs:{"data-field":"phone_no",caption:"Phone No"}}),a("DxColumn",{attrs:{width:50,caption:"","cell-template":"option-btn-set"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1),a("div",{staticClass:"page-content page-info border-left"},[a("div",{staticClass:"pm-info-sidebar form"},[a("p",{staticClass:"pm-section-label"},[t._v("Details")]),a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Client Name:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.client_name)+" ")])]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Address:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.address)+" ")])]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Location:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.location)+" ")])]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Domestic:")]),1==t.currentViewRow.is_domestic?a("p",{staticClass:"info"},[t._v("Yes")]):t._e(),0==t.currentViewRow.is_domestic?a("p",{staticClass:"info"},[t._v("No")]):t._e()]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Phone:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.phone_no)+" ")])]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Email:")]),a("p",{staticClass:"info"},[t._v(" "+t._s(t.currentViewRow.email)+" ")])])]),a("div",{staticClass:"form-button-container"},[a("div",{staticClass:"button-set info-button-set"},[a("v-ons-toolbar-button",{on:{click:function(e){return t.TOGGLE_POPUP("edit")}}},[a("i",{staticClass:"las la-pen"}),a("span",[t._v("Edit")])]),a("v-ons-toolbar-button",{staticClass:"red",on:{click:function(e){return t.DELETE_ITEM()}}},[a("i",{staticClass:"las la-trash"}),a("span",[t._v("Delete")])])],1)])])])]),1==t.isAdd?a("popupAdd",{on:{"btn-cancel-add":function(e){return t.TOGGLE_POPUP("add")},refreshList:function(e){return t.FETCH_LIST()}}}):t._e(),1==t.isEdit?a("popupEdit",{attrs:{editInfo:t.editInfo},on:{"btn-cancel-edit":function(e){return t.TOGGLE_POPUP("edit")},refreshList:function(e){return t.FETCH_LIST()}}}):t._e(),1==t.isLoading?a("contentLoading",{attrs:{text:"Loading, please wait...",color:"#fc9b21"}}):t._e()],1)},i=[],n=a(71642),o=a(53706),l=a.n(o),r=a(66262),c=a(48626),d=a(39477),u=a(85981),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[t._m(0),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Client Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_name,expression:"formData.client_name"}],attrs:{type:"text",placeholder:"Client Name"},domProps:{value:t.formData.client_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_name",e.target.value)}}}),t._m(1)]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Location:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.location,expression:"formData.location"}],attrs:{type:"text",placeholder:"Location"},domProps:{value:t.formData.location},on:{input:function(e){e.target.composing||t.$set(t.formData,"location",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Phone No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone_no,expression:"formData.phone_no"}],attrs:{type:"text",placeholder:"Phone No"},domProps:{value:t.formData.phone_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],attrs:{type:"email",placeholder:"Email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}})]),a("div",{staticClass:"input-set",staticStyle:{"grid-column":"span 2"}},[a("p",{staticClass:"label"},[t._v("Address:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticStyle:{height:"60px",width:"610px","max-height":"610px"},attrs:{type:"text",placeholder:"Address"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),a("div",{staticClass:"checkbox-set"},[a("v-ons-checkbox",{attrs:{"input-id":"incountry"},model:{value:t.formData.is_domestic,callback:function(e){t.$set(t.formData,"is_domestic",e)},expression:"formData.is_domestic"}}),a("label",{attrs:{for:"incountry"}},[t._v("Client is located in Thailand")])],1)])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-header"},[a("label",[t._v("Add New Client Info")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"star-label"},[a("i",{staticClass:"las la-asterisk"})])}],f={name:"popup-add-client",components:{},data(){return{formData:{client_name:"",location:"",is_domestic:!0,phone_no:"",email:"",address:""}}},methods:{SAVE(){this.formData.client_name?this.$ons.notification.confirm("Confirm save?").then((t=>{if(1==t){const t=this.formData;(0,d.Z)({method:"post",url:"/project-manager/client-add",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t}).then((t=>{200==t.status&&(this.$ons.notification.alert("Client Add successful"),this.$emit("btn-cancel-add"),this.$emit("refreshList"))})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))}})):this.$ons.notification.alert('"Client name" field cannot be empty')},CANCEL(){console.log(this.formData);let t=this.formData;console.log(t),this.formData!=t?this.$ons.notification.confirm("Your unsaved changes will be lost").then((t=>{1==t&&this.$emit("btn-cancel-add")})):this.$emit("btn-cancel-add")}}},v=f,h=a(1001),_=(0,h.Z)(v,p,m,!1,null,"10f021e9",null),C=_.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-wrapper"},[a("div",{staticClass:"popup-card"},[t._m(0),a("div",{staticClass:"popup-content form"},[a("div",{staticClass:"form-item-container"},[a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Client Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.client_name,expression:"formData.client_name"}],attrs:{type:"text"},domProps:{value:t.formData.client_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"client_name",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Location:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.location,expression:"formData.location"}],attrs:{type:"text"},domProps:{value:t.formData.location},on:{input:function(e){e.target.composing||t.$set(t.formData,"location",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Phone No:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone_no,expression:"formData.phone_no"}],attrs:{type:"text"},domProps:{value:t.formData.phone_no},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone_no",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("p",{staticClass:"label"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],attrs:{type:"email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}})]),a("div",{staticClass:"input-set",staticStyle:{"grid-column":"span 2"}},[a("p",{staticClass:"label"},[t._v("Address:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticStyle:{height:"60px",width:"610px","max-height":"610px"},attrs:{type:"text"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),a("div",{staticClass:"checkbox-set"},[a("v-ons-checkbox",{attrs:{"input-id":"incountry"},model:{value:t.formData.is_domestic,callback:function(e){t.$set(t.formData,"is_domestic",e)},expression:"formData.is_domestic"}}),a("label",{attrs:{for:"incountry"}},[t._v("Client is located in Thailand")])],1)])]),a("div",{staticClass:"popup-footer"},[a("div",{staticClass:"button-set"},[a("button",{staticClass:"blue",on:{click:function(e){return t.SAVE()}}},[a("label",[t._v("Save Edit")])]),a("button",{staticClass:"grey",on:{click:function(e){return t.CANCEL()}}},[a("label",[t._v("Cancel")])])])])])])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popup-header"},[a("label",[t._v("Edit Client Info")])])}],D=a(89584),x={name:"popup-edit-client",components:{},props:{editInfo:Object},created(){this.formData=(0,D.Z)(this.editInfo)},data(){return{formData:{client_name:"",location:"",is_domestic:!0,phone_no:"",email:"",address:""}}},methods:{SAVE(){this.$ons.notification.confirm("Confirm save?").then((t=>{if(1==t){const t=this.formData;(0,d.Z)({method:"put",url:"/project-manager/client-edit",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t}).then((t=>{200==t.status&&(this.$ons.notification.alert("Edit successful"),this.$emit("btn-cancel-edit"),this.$emit("refreshList"))})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)})).finally((()=>{}))}}))},CANCEL(){this.$emit("btn-cancel-edit")}}},w=x,E=(0,h.Z)(w,g,b,!1,null,"515fdbba",null),P=E.exports,$=a(49075),N={name:"ViewClientList",components:{toolbar:u.Z,DxDataGrid:c.DxDataGrid,DxSearchPanel:c.DxSearchPanel,DxPaging:c.DxPaging,DxPager:c.DxPager,DxScrolling:c.DxScrolling,DxColumn:c.DxColumn,DxExport:c.DxExport,contentLoading:$.Z,popupAdd:C,popupEdit:P},created(){this.$store.commit("UPDATE_CURRENT_INAPP",{name:"Client Contact",icon:"/img/icon_menu/contact/client.png"}),1==this.$store.state.status.server&&this.FETCH_LIST()},data(){return{clientList:[],isAdd:!1,isEdit:!1,isLoading:!1,currentViewRow:{},errorMessage:"",editInfo:""}},computed:{},methods:{EXPORT_DATA(t){const e=new n.Workbook,a=e.addWorksheet("Clients");(0,r.d)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){l()(new Blob([t],{type:"application/octet-stream"}),"Clients.xlsx")}))})),t.cancel=!0},VIEW_INFO(t){this.currentViewRow=t.data},TOGGLE_POPUP(t){"add"==t?1==this.isAdd?this.isAdd=!1:this.isAdd=!0:"edit"==t&&(1==this.isEdit?this.isEdit=!1:(this.editInfo=(0,D.Z)(this.currentViewRow),this.isEdit=!0))},FETCH_LIST(){this.isLoading=!0,(0,d.Z)({method:"get",url:"/project-manager/client-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((t=>{t.data&&(this.clientList=t.data,this.currentViewRow=this.clientList[0])})).catch((t=>{console.log(t),this.$ons.notification.alert(t.code+" "+t.response.status+" "+t.response.statusText)})).finally((()=>{this.isLoading=!1}))},DELETE_CLIENT(t){let e=t.data.id_client;this.$ons.notification.confirm("Confirm delete?").then((t=>{1==t&&(0,d.Z)({method:"delete",url:"/project-manager/client-delete",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_client:e}}).then((t=>{200==t.status&&(this.$ons.notification.alert("Client contact delete successful"),this.FETCH_LIST())})).catch((t=>{this.$ons.notification.alert(t.code+" "+t.response.status)})).finally((()=>{}))}))}}},S=N,L=(0,h.Z)(S,s,i,!1,null,"6bbfcde6",null),k=L.exports},89584:function(t,e,a){a.d(e,{Z:function(){return s}});var s=i;function i(t){let e=t;var a={}.toString.call(t).slice(8,-1);if("Set"==a)return new Set([...t].map((t=>i(t))));if("Map"==a)return new Map([...t].map((t=>[i(t[0]),i(t[1])])));if("Date"==a)return new Date(t.getTime());if("RegExp"==a)return RegExp(t.source,n(t));if("Array"==a||"Object"==a)for(var s in e=Array.isArray(t)?[]:{},t)e[s]=i(t[s]);return e}function n(t){if("string"==typeof t.source.flags)return t.source.flags;var e=[];return t.global&&e.push("g"),t.ignoreCase&&e.push("i"),t.multiline&&e.push("m"),t.sticky&&e.push("y"),t.unicode&&e.push("u"),e.join("")}}}]);
//# sourceMappingURL=375.7b908a87.js.map