{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//API\nimport axios from \"/axios.js\";\nexport default {\n  name: \"AppTopBar\",\n  components: {},\n  data: function data() {\n    return {\n      popoverVisible: false,\n      popoverTarget: null,\n      popoverDirection: \"up\",\n      coverTarget: false,\n      user: \"\"\n    };\n  },\n  created: function created() {\n    if (this.$store.state.status.server == true) this.FETCH_USER_INFO();\n  },\n  mounted: function mounted() {},\n  updated: function updated() {},\n  methods: {\n    FETCH_USER_INFO: function FETCH_USER_INFO() {\n      var _this = this;\n\n      if (JSON.parse(localStorage.getItem(\"user\"))) {\n        var id_user = JSON.parse(localStorage.getItem(\"user\")).id_user;\n      }\n\n      if (id_user) {\n        axios({\n          method: \"post\",\n          url: \"/user/get-info\",\n          headers: {\n            Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n          },\n          data: {\n            id_user: id_user\n          }\n        }).then(function (res) {\n          if (res.status == 200) {\n            var user = res.data.user;\n            _this.user = user;\n\n            if (user.profile_picture == null) {\n              _this.user.profile_picture = null;\n            } else {\n              _this.user.profile_picture = _this.baseURL + _this.user.profile_picture;\n            }\n\n            _this.$store.commit(\"SIGN_IN\", _this.user);\n\n            console.log(\"==> Fetch User Info : Top Bar <==\");\n          }\n        }).catch(function (error) {\n          console.log(error);\n        }).finally(function () {\n          _this.isLoading = false;\n        });\n      }\n    },\n    SHOW_POPOVER: function SHOW_POPOVER(event, direction) {\n      var coverTarget = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.popoverTarget = event;\n      this.popoverDirection = direction;\n      this.coverTarget = coverTarget;\n      this.popoverVisible = true;\n    },\n    GO_TO: function GO_TO(path) {\n      this.$store.commit(\"CLEAR_CURRENT_INAPP\");\n      var currentPath = this.$route.path;\n\n      if (currentPath != path) {\n        this.$router.push({\n          path: path,\n          replace: true\n        });\n      }\n    },\n    SIGN_OUT: function SIGN_OUT() {\n      var _this2 = this;\n\n      this.popoverVisible = false;\n      this.$ons.notification.confirm(\"Confirm Log Out?\").then(function (res) {\n        if (res == 1) {\n          _this2.$store.commit(\"SIGN_OUT\");\n\n          _this2.$router.push(\"/login\");\n        }\n      });\n    }\n  },\n  computed: {\n    isLoginPage: function isLoginPage() {\n      var path = this.$route.path;\n\n      if (path == \"/login\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    baseURL: function baseURL() {\n      var mode = this.$store.state.mode;\n      if (mode == \"dev\") return this.$store.state.modeURL.dev;else if (mode == \"prod\") return this.$store.state.modeURL.prod;else return console.log(\"develpment mode set up incorrect.\");\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AAEA;AACAA,mBADA;AAEAC,gBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,2BADA;AAEAC,yBAFA;AAGAC,4BAHA;AAIAC,wBAJA;AAKAC;AALA;AAOA,GAXA;AAYAC,SAZA,qBAYA;AACA;AACA,GAdA;AAeAC,SAfA,qBAeA,EAfA;AAgBAC,SAhBA,qBAgBA,EAhBA;AAiBAC;AACAC,mBADA,6BACA;AAAA;;AACA;AACA;AACA;;AACA;AACAC;AACAC,wBADA;AAEAC,+BAFA;AAGAC;AACAC,2BACA;AAFA,WAHA;AAOAf;AAAAgB;AAAA;AAPA,WASAC,IATA,CASA;AACA;AACA;AACA;;AACA;AACA;AACA,aAFA,MAEA;AACA,2CACA,0CADA;AAEA;;AACA;;AACAC;AACA;AACA,SAtBA,EAuBAC,KAvBA,CAuBA;AACAD;AACA,SAzBA,EA0BAE,OA1BA,CA0BA;AACA;AACA,SA5BA;AA6BA;AACA,KApCA;AAqCAC,gBArCA,wBAqCAC,KArCA,EAqCAC,SArCA,EAqCA;AAAA;AACA;AACA;AACA;AACA;AACA,KA1CA;AA2CAC,SA3CA,iBA2CAC,IA3CA,EA2CA;AACA;AACA;;AACA;AACA;AAAAA;AAAAC;AAAA;AACA;AACA,KAjDA;AAkDAC,YAlDA,sBAkDA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OALA;AAMA;AA1DA,GAjBA;AA6EAC;AACAC,eADA,yBACA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KARA;AASAC,WATA,qBASA;AACA;AACA,mEACA,+DACA;AACA;AAdA;AA7EA","names":["name","components","data","popoverVisible","popoverTarget","popoverDirection","coverTarget","user","created","mounted","updated","methods","FETCH_USER_INFO","axios","method","url","headers","Authorization","id_user","then","console","catch","finally","SHOW_POPOVER","event","direction","GO_TO","path","replace","SIGN_OUT","computed","isLoginPage","baseURL"],"sourceRoot":"src/components/app-structures","sources":["app-topbar.vue"],"sourcesContent":["<template>\n  <div id=\"app-topbar\" v-if=\"isLoginPage == false\">\n    <div class=\"app-topbar-wrapper\">\n      <div class=\"left-col\">\n        <div class=\"web-logo\" v-on:click=\"GO_TO('/')\">\n          <img src=\"/img/logo.png\" alt=\"\" />\n        </div>\n        <div class=\"inapp-menu\" v-if=\"this.$store.state.currentInApp\">\n          <div class=\"home-btn\" v-on:click=\"GO_TO('/')\">\n            <i class=\"las la-home\"></i>\n          </div>\n          <div class=\"btn-group-separater\"></div>\n          <div class=\"inapp-logo\">\n            <img :src=\"this.$store.state.currentInApp.icon\" />\n            <label for=\"\">{{ this.$store.state.currentInApp.name }}</label>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"right-col\" v-if=\"user\">\n        <v-ons-toolbar-button\n          v-on:click=\"SHOW_POPOVER($event, 'down', true)\"\n          style=\"padding-right: 0px\"\n        >\n          <span> {{ user.firstname }} {{ user.lastname }} </span>\n          <div class=\"topbar-photo\">\n            <img :src=\"user.profile_picture\" v-if=\"user.profile_picture\" />\n            <img\n              src=\"/img/default_profile_picture.png\"\n              v-if=\"!user.profile_picture\"\n            />\n          </div>\n          <!-- <i class=\"las la-angle-down\"></i> -->\n        </v-ons-toolbar-button>\n\n        <v-ons-popover\n          cancelable\n          :visible.sync=\"popoverVisible\"\n          :target=\"popoverTarget\"\n          :direction=\"popoverDirection\"\n          :cover-target=\"coverTarget\"\n        >\n          <v-ons-toolbar-button class=\"popover-button\" v-on:click=\"GO_TO('/')\">\n            <span>Home</span>\n            <i class=\"las la-home\"></i>\n          </v-ons-toolbar-button>\n\n          <hr />\n\n          <v-ons-toolbar-button\n            class=\"popover-button\"\n            v-on:click=\"GO_TO('/account')\"\n          >\n            <span>My Account</span>\n            <i class=\"las la-user-circle\"></i>\n          </v-ons-toolbar-button>\n\n          <!-- <v-ons-toolbar-button\n            class=\"popover-button\"\n            v-on:click=\"GO_TO('/helps')\"\n          >\n            <span>Helps</span>\n            <i class=\"lar la-question-circle\"></i>\n          </v-ons-toolbar-button>\n\n          <hr /> -->\n\n          <!-- <v-ons-toolbar-button class=\"popover-button\">\n            <span>เปลี่ยนเป็นภาษาไทย</span>\n            <i class=\"fas fa-globe\"></i>\n          </v-ons-toolbar-button>\n\n          <hr /> -->\n\n          <v-ons-toolbar-button\n            class=\"popover-button popover-button-red\"\n            v-on:click=\"SIGN_OUT()\"\n          >\n            <span>Log Out</span>\n            <i class=\"las la-sign-out-alt\"></i>\n          </v-ons-toolbar-button>\n        </v-ons-popover>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//API\nimport axios from \"/axios.js\";\n\nexport default {\n  name: \"AppTopBar\",\n  components: {},\n  data() {\n    return {\n      popoverVisible: false,\n      popoverTarget: null,\n      popoverDirection: \"up\",\n      coverTarget: false,\n      user: \"\",\n    };\n  },\n  created() {\n    if (this.$store.state.status.server == true) this.FETCH_USER_INFO();\n  },\n  mounted() {},\n  updated() {},\n  methods: {\n    FETCH_USER_INFO() {\n      if (JSON.parse(localStorage.getItem(\"user\"))) {\n        var id_user = JSON.parse(localStorage.getItem(\"user\")).id_user;\n      }\n      if (id_user) {\n        axios({\n          method: \"post\",\n          url: \"/user/get-info\",\n          headers: {\n            Authorization:\n              \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n          },\n          data: { id_user },\n        })\n          .then((res) => {\n            if (res.status == 200) {\n              var user = res.data.user;\n              this.user = user;\n              if (user.profile_picture == null) {\n                this.user.profile_picture = null;\n              } else {\n                this.user.profile_picture =\n                  this.baseURL + this.user.profile_picture;\n              }\n              this.$store.commit(\"SIGN_IN\", this.user);\n              console.log(\"==> Fetch User Info : Top Bar <==\");\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n          })\n          .finally(() => {\n            this.isLoading = false;\n          });\n      }\n    },\n    SHOW_POPOVER(event, direction, coverTarget = false) {\n      this.popoverTarget = event;\n      this.popoverDirection = direction;\n      this.coverTarget = coverTarget;\n      this.popoverVisible = true;\n    },\n    GO_TO(path) {\n      this.$store.commit(\"CLEAR_CURRENT_INAPP\");\n      var currentPath = this.$route.path;\n      if (currentPath != path) {\n        this.$router.push({ path: path, replace: true });\n      }\n    },\n    SIGN_OUT() {\n      this.popoverVisible = false;\n      this.$ons.notification.confirm(\"Confirm Log Out?\").then((res) => {\n        if (res == 1) {\n          this.$store.commit(\"SIGN_OUT\");\n          this.$router.push(\"/login\");\n        }\n      });\n    },\n  },\n  computed: {\n    isLoginPage() {\n      var path = this.$route.path;\n      if (path == \"/login\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    baseURL() {\n      var mode = this.$store.state.mode;\n      if (mode == \"dev\") return this.$store.state.modeURL.dev;\n      else if (mode == \"prod\") return this.$store.state.modeURL.prod;\n      else return console.log(\"develpment mode set up incorrect.\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/main.scss\";\n#app-topbar {\n  width: 100%;\n  height: 54px;\n  position: fixed;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background: #fff;\n  // backdrop-filter: blur(70px);\n  // box-shadow: 0px 1px 4px rgb(0 0 0 / 15%);\n  border: 1px solid #e6e6e6;\n  border-width: 0 0 1px 0;\n\n  .app-topbar-wrapper {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 54px;\n    @media screen and (max-width: 768px) {\n      padding: 0;\n    }\n  }\n  .left-col {\n    display: flex;\n    align-items: center;\n    .sidebar-toggle {\n      width: 40px;\n      height: 30px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      margin-left: 10px;\n      border-radius: 6px;\n      i {\n        font-size: 18px;\n        color: #5b5b5b;\n      }\n    }\n    .web-logo {\n      width: 100px;\n      cursor: pointer;\n\n      margin: 0 10px 0 20px;\n      // cursor: pointer;\n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n      @media screen and (max-width: 768px) {\n        width: 60px;\n        margint-top: 4px;\n      }\n    }\n    .inapp-menu {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      .home-btn {\n        width: 40px;\n        height: 30px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        margin-right: 5px;\n        border-radius: 6px;\n        i {\n          font-size: 18px;\n          color: $web-font-color-grey;\n        }\n      }\n      .home-btn:hover {\n        background-color: #f6f6f6;\n        i {\n          color: $dexon-primary-blue;\n        }\n      }\n      .inapp-logo {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-left: 10px;\n        img {\n          height: 30px;\n          object-fit: contain;\n          -webkit-mask: url(data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20fill-rule%3D%22evenodd%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%221.41%22%20clip-rule%3D%22evenodd%22%20version%3D%221.1%22%20viewBox%3D%220%200%20460%20460%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20d%3D%22M460%20316.1c0%205.5%200%2010.99-.04%2016.48-.03%204.63-.08%209.26-.2%2013.88a201.73%20201.73%200%200%201-2.66%2030.21c-1.71%2010-4.9%2019.68-9.47%2028.73a96.6%2096.6%200%200%201-42.23%2042.23%20101.86%20101.86%200%200%201-28.71%209.46c-10%201.65-20.1%202.54-30.22%202.66a649%20649%200%200%201-13.88.21c-5.5.03-10.99.03-16.48.03H143.89c-5.49%200-10.98%200-16.48-.03a648.8%20648.8%200%200%201-13.88-.2%20201.46%20201.46%200%200%201-30.22-2.67c-9.99-1.7-19.67-4.9-28.71-9.46a96.61%2096.61%200%200%201-42.23-42.22%20101.96%20101.96%200%200%201-9.47-28.74%20201.6%20201.6%200%200%201-2.66-30.2c-.12-4.63-.18-9.26-.2-13.89C0%20327.08%200%20321.6%200%20316.1V143.9c0-5.5%200-11%20.04-16.5.02-4.62.08-9.25.2-13.87a201.64%20201.64%200%200%201%202.66-30.2c1.71-10%204.9-19.68%209.47-28.74A96.6%2096.6%200%200%201%2054.6%2012.36%20101.96%20101.96%200%200%201%2083.3%202.9c10-1.64%2020.1-2.53%2030.22-2.66%204.63-.12%209.26-.18%2013.88-.2%205.5-.03%2011-.03%2016.48-.03H316.1c5.5%200%2011%200%2016.49.03a649%20649%200%200%201%2013.88.2c10.12.13%2020.22%201.02%2030.21%202.66%2010%201.71%2019.67%204.9%2028.72%209.46a96.58%2096.58%200%200%201%2042.24%2042.23%20101.92%20101.92%200%200%201%209.46%2028.73%20201.7%20201.7%200%200%201%202.66%2030.21c.12%204.63.18%209.26.2%2013.88.04%205.5.04%2010.99.04%2016.48V316.1z%22%2F%3E%3C%2Fsvg%3E%0A)\n            center/100% 100% no-repeat;\n          mask: url(data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20fill-rule%3D%22evenodd%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%221.41%22%20clip-rule%3D%22evenodd%22%20version%3D%221.1%22%20viewBox%3D%220%200%20460%20460%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20d%3D%22M460%20316.1c0%205.5%200%2010.99-.04%2016.48-.03%204.63-.08%209.26-.2%2013.88a201.73%20201.73%200%200%201-2.66%2030.21c-1.71%2010-4.9%2019.68-9.47%2028.73a96.6%2096.6%200%200%201-42.23%2042.23%20101.86%20101.86%200%200%201-28.71%209.46c-10%201.65-20.1%202.54-30.22%202.66a649%20649%200%200%201-13.88.21c-5.5.03-10.99.03-16.48.03H143.89c-5.49%200-10.98%200-16.48-.03a648.8%20648.8%200%200%201-13.88-.2%20201.46%20201.46%200%200%201-30.22-2.67c-9.99-1.7-19.67-4.9-28.71-9.46a96.61%2096.61%200%200%201-42.23-42.22%20101.96%20101.96%200%200%201-9.47-28.74%20201.6%20201.6%200%200%201-2.66-30.2c-.12-4.63-.18-9.26-.2-13.89C0%20327.08%200%20321.6%200%20316.1V143.9c0-5.5%200-11%20.04-16.5.02-4.62.08-9.25.2-13.87a201.64%20201.64%200%200%201%202.66-30.2c1.71-10%204.9-19.68%209.47-28.74A96.6%2096.6%200%200%201%2054.6%2012.36%20101.96%20101.96%200%200%201%2083.3%202.9c10-1.64%2020.1-2.53%2030.22-2.66%204.63-.12%209.26-.18%2013.88-.2%205.5-.03%2011-.03%2016.48-.03H316.1c5.5%200%2011%200%2016.49.03a649%20649%200%200%201%2013.88.2c10.12.13%2020.22%201.02%2030.21%202.66%2010%201.71%2019.67%204.9%2028.72%209.46a96.58%2096.58%200%200%201%2042.24%2042.23%20101.92%20101.92%200%200%201%209.46%2028.73%20201.7%20201.7%200%200%201%202.66%2030.21c.12%204.63.18%209.26.2%2013.88.04%205.5.04%2010.99.04%2016.48V316.1z%22%2F%3E%3C%2Fsvg%3E%0A)\n            center/100% 100% no-repeat;\n        }\n        label {\n          font-size: 1.75em;\n          margin-left: 10px;\n          color: $web-font-color-grey;\n        }\n      }\n    }\n  }\n  .right-col {\n    padding-right: 20px;\n    .toolbar-button {\n      height: 34px;\n      padding: 0 10px;\n      border: 0;\n      border-radius: 6px;\n      display: flex;\n      span {\n        color: $web-font-color-grey;\n      }\n    }\n    .toolbar-button:hover > span {\n      color: $web-font-color-blue;\n    }\n    .topbar-photo {\n      width: 24px;\n      height: 24px;\n      border-radius: 100px;\n      overflow: hidden;\n      margin-left: 10px;\n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n    }\n  }\n}\n.popover-button {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 6px;\n  padding: 6px 18px;\n  min-height: 30px;\n  color: $dexon-primary-blue;\n  i {\n    width: 20px;\n    text-align: center;\n    color: $dexon-primary-blue;\n  }\n}\n.popover-button:hover {\n  border-radius: 0px;\n}\n.popover-button-red {\n  i,\n  span {\n    color: #ff4438;\n  }\n}\n.list-item {\n  padding: 0 14px;\n}\n\nhr {\n  margin: 0 auto;\n  width: calc(100% - 20px);\n}\n\n.btn-group-separater {\n  margin-right: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module"}