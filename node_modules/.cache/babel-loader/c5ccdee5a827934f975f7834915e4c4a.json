{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//DataGrid\nimport \"devextreme/dist/css/dx.light.css\";\nimport { DxDataGrid, DxSearchPanel, DxPaging, DxPager, DxScrolling, DxColumn, DxToolbar, DxItem } from \"devextreme-vue/data-grid\"; //Pages & Structures\n\nimport toolbar from \"@/components/app-structures/app-toolbar.vue\";\nimport popupAdd from \"@/views/Applications/Record/Travel/travel-detail-add.vue\";\nimport popupEdit from \"@/views/Applications/Record/Visiting/visiting-edit.vue\";\nimport contentLoading from \"@/components/app-structures/app-content-loading.vue\";\nimport approvalBox from \"@/components/app-structures/app-item-approval.vue\";\nimport moment from \"moment\"; //API\n\nimport axios from \"/axios.js\";\nexport default {\n  name: \"ViewTravelInfo\",\n  components: {\n    DxDataGrid: DxDataGrid,\n    DxSearchPanel: DxSearchPanel,\n    DxPaging: DxPaging,\n    DxPager: DxPager,\n    DxScrolling: DxScrolling,\n    DxColumn: DxColumn,\n    DxToolbar: DxToolbar,\n    DxItem: DxItem,\n    toolbar: toolbar,\n    popupAdd: popupAdd,\n    popupEdit: popupEdit,\n    contentLoading: contentLoading,\n    approvalBox: approvalBox\n  },\n  created: function created() {\n    if (this.$store.state.status.server == true) this.FETCH_INFO();\n  },\n  data: function data() {\n    return {\n      isLoading: false,\n      isAdd: false,\n      isEdit: false,\n      isSign: false,\n      sign_status: true,\n      info: \"\",\n      popupTitle: \"\",\n      TravelDetailList: [{\n        id_travel_detail: 0,\n        id_travel: 2,\n        id_visit: 1,\n        visit_record_no: \"AI-CVR-09-22-01\",\n        travel_from: \"DEXON Main Office\",\n        travel_to: \"PTTLNG\",\n        distance: 24,\n        client_name: \"PTTLNG\",\n        treval_note: \"nothing to note krub\"\n      }, {\n        id_travel_detail: 1,\n        id_travel: 2,\n        id_visit: 2,\n        visit_record_no: \"AI-CVR-09-22-02\",\n        travel_from: \"PTTLNG\",\n        travel_to: \"PTTEP S1\",\n        distance: 76,\n        client_name: \"PTTEP S1\",\n        treval_note: \"\"\n      }, {\n        id_travel_detail: 2,\n        id_travel: 2,\n        id_visit: 3,\n        visit_record_no: \"AI-CVR-09-22-03\",\n        travel_from: \"PTTEP S1\",\n        travel_to: \"DEXON Main Office\",\n        distance: 96,\n        client_name: \"-\",\n        treval_note: \"\"\n      }]\n    };\n  },\n  methods: {\n    TOGGLE_POPUP_SIGN: function TOGGLE_POPUP_SIGN(opt) {\n      if (this.isSign == true) this.isSign = false;\n\n      if (opt == \"dexon\") {\n        this.popupTitle = \"Dexon Signature\";\n        this.currentSigner = \"dexon\";\n        this.isSign = true;\n      } else if (opt == \"client\") {\n        this.popupTitle = \"Client Signature\";\n        this.currentSigner = \"client\";\n        this.isSign = true;\n      }\n    },\n    FETCH_INFO: function FETCH_INFO() {\n      var _this = this;\n\n      this.isLoading = true;\n      setTimeout(function () {\n        var id_travel = _this.$route.params;\n\n        if (id_travel) {\n          axios({\n            method: \"post\",\n            url: \"/travel-record/travel-record-info\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: id_travel\n          }).then(function (res) {\n            console.log(res);\n\n            if (res.status == 200 && res.data[0]) {\n              _this.info = res.data[0];\n            } else {\n              _this.$ons.notification.alert(\"No record found!\");\n            }\n          }).catch(function (error) {\n            _this.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n          }).finally(function () {\n            _this.isLoading = false;\n          });\n        }\n      }, 500);\n    },\n    FETCH_INFO_LIST: function FETCH_INFO_LIST() {\n      var _this2 = this;\n\n      this.isLoading = true;\n      setTimeout(function () {\n        var id_travel = _this2.$route.params;\n\n        if (id_travel) {\n          axios({\n            method: \"post\",\n            url: \"/travel-record/travel-record-info\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: id_travel\n          }).then(function (res) {\n            console.log(res);\n\n            if (res.status == 200 && res.data[0]) {\n              _this2.info = res.data[0];\n            } else {\n              _this2.$ons.notification.alert(\"No record found!\");\n            }\n          }).catch(function (error) {\n            _this2.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n          }).finally(function () {\n            _this2.isLoading = false;\n          });\n        }\n      }, 500);\n    },\n    DELETE_PROJECT: function DELETE_PROJECT() {\n      var _this3 = this;\n\n      var id_visit = this.$route.params;\n      this.$ons.notification.confirm(\"Confirm delete?\").then(function (res) {\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/visit-record/visit-record-delete\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: id_visit\n          }).then(function (res) {\n            if (res.status == 200) {\n              _this3.$ons.notification.alert(\"Visit Record delete successful\");\n\n              _this3.$router.go(-1);\n            }\n          }).catch(function (error) {\n            _this3.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n          }).finally(function () {});\n        }\n      });\n    },\n    TOGGLE_POPUP: function TOGGLE_POPUP(option) {\n      if (option == \"add\") {\n        this.isAdd = !this.isAdd;\n      } else if (option == \"edit\") {\n        this.isEdit = !this.isEdit;\n      }\n    },\n    APPROVE_BTN: function APPROVE_BTN(option) {\n      var _this4 = this;\n\n      var user = JSON.parse(localStorage.getItem(\"user\"));\n      var alertText = \"N/A\";\n      var data = {\n        id_fuel_bill: this.currentViewRow.id_fuel_bill,\n        approve_status: 0,\n        id_user: user.id_user //updater user\n\n      };\n\n      if (option == \"req_approve\") {\n        //send approve request 1--> 2\n        data.approve_status = 2;\n        alertText = \"Confirm Send Approve Request?\";\n      } else if (option == \"approve\") {\n        //feedback approve 2 --> 3\n        data.approve_status = 3;\n        alertText = \"Confirm Send Approve Feedback?\";\n      } else if (option == \"reject\") {\n        //feedback reject 2 --> 4\n        data.approve_status = 4;\n        alertText = \"Confirm Send Reject Feedback?\";\n      } else if (option == \"req_edit\") {\n        //feedback request edit 2 --> 5\n        data.approve_status = 5;\n        alertText = \"Confirm Send Request Edit Feedback?\";\n      }\n\n      this.$ons.notification.confirm(alertText).then(function (res) {\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/fuel-bill/fuel-bill-status\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: data\n          }).then(function (res) {\n            console.log(res);\n\n            if (res.status == 200) {\n              _this4.$ons.notification.alert(\"Approval Status Sent\");\n\n              _this4.FETCH_LIST();\n            }\n          }).catch(function (error) {\n            console.log(error);\n          }).finally(function () {});\n        }\n      });\n    }\n  },\n  computed: {\n    travel_date: function travel_date() {\n      if (this.info.date) return moment(this.info.date).format(\"LL\");\n      return null;\n    },\n    created_date: function created_date() {\n      if (this.info.created_time) return moment(this.info.created_time).format(\"LLL\");\n      return null;\n    },\n    total_mile: function total_mile() {\n      var sum = this.TravelDetailList.reduce(function (accumulator, object) {\n        return accumulator + object.distance;\n      }, 0);\n      return sum;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["DxDataGrid","DxSearchPanel","DxPaging","DxPager","DxScrolling","DxColumn","DxToolbar","DxItem","name","components","toolbar","popupAdd","popupEdit","contentLoading","approvalBox","created","data","isLoading","isAdd","isEdit","isSign","sign_status","info","popupTitle","TravelDetailList","id_travel_detail","id_travel","id_visit","visit_record_no","travel_from","travel_to","distance","client_name","treval_note","methods","TOGGLE_POPUP_SIGN","opt","FETCH_INFO","setTimeout","axios","method","url","headers","Authorization","then","console","catch","error","finally","FETCH_INFO_LIST","DELETE_PROJECT","TOGGLE_POPUP","option","APPROVE_BTN","id_fuel_bill","approve_status","id_user","alertText","computed","travel_date","created_date","total_mile"],"sourceRoot":"src/views/Applications/Record/Travel","sources":["TravelInfo.vue"],"sourcesContent":["<template>\n  <div class=\"pm-page\">\n    <div class=\"pm-toolbar\">\n      <toolbar\n        :pageSubName=\"'Record No. ' + info.record_no\"\n        :isBack=\"true\"\n        :isEdit=\"sign_status\"\n        :isDelete=\"true\"\n        :isPrint=\"false\"\n        :isDownload=\"true\"\n        @isDeleteBtn=\"DELETE_PROJECT()\"\n        @isEditBtn=\"TOGGLE_POPUP()\"\n        @isDownloadBtn=\"DOWNLOAD_PDF()\"\n        @refreshInfo=\"FETCH_INFO()\"\n      />\n    </div>\n    <div class=\"pm-page-container\">\n      <div class=\"page-content\">\n        <approvalBox\n          class=\"approval-box-fullpage\"\n          :status=\"this.info.approve_status\"\n          @btnRequestApprove=\"APPROVE_BTN('req_approve')\"\n          @btnApprove=\"APPROVE_BTN('approve')\"\n          @btnReject=\"APPROVE_BTN('reject')\"\n          @btnRequestEdit=\"APPROVE_BTN('req_edit')\"\n          @btnResendApprove=\"APPROVE_BTN('req_approve')\"\n          v-if=\"\n            this.info.created_by == this.$store.state.user.id_user ||\n            this.$store.state.user.role == 'manager'\n          \"\n        />\n\n        <div class=\"page-info form\">\n          <p class=\"page-section-label\">Record Detail</p>\n          <div class=\"form-item-container\">\n            <div class=\"input-set\">\n              <p class=\"label\">Record No:</p>\n              <p class=\"info\">\n                {{ info.record_no }}\n              </p>\n            </div>\n            <div class=\"input-set\">\n              <p class=\"label\">Travel Date:</p>\n              <p class=\"info\">\n                {{ travel_date }}\n              </p>\n            </div>\n            <div class=\"input-set\">\n              <p class=\"label\">Created By:</p>\n              <p class=\"info\">\n                {{ info.created_by_name }}\n              </p>\n            </div>\n            <div class=\"input-set\">\n              <p class=\"label\">Total Mile:</p>\n              <p class=\"info\" v-if=\"total_mile > 0\">{{ total_mile }} Km</p>\n              <p class=\"info\" v-if=\"!total_mile || total_mile <= 0\">-</p>\n            </div>\n            <div class=\"input-set\">\n              <p class=\"label\">Created Date:</p>\n              <p class=\"info\">\n                {{ created_date }}\n              </p>\n            </div>\n            <div class=\"input-set\">\n              <p class=\"label\">Approval Status:</p>\n              <p class=\"info\">\n                {{ info.status_desc }}\n              </p>\n            </div>\n            <div class=\"input-set\" style=\"grid-column: span 3\">\n              <p class=\"label\">Note:</p>\n              <p class=\"info\" style=\"height: 60px; text-align: left\">\n                {{ info.note }}\n              </p>\n            </div>\n          </div>\n\n          <div class=\"\">\n            <DxDataGrid\n              id=\"contact-client-list\"\n              :data-source=\"TravelDetailList\"\n              :selection=\"{ mode: 'single' }\"\n              :hover-state-enabled=\"true\"\n              :allow-column-reordering=\"false\"\n              :show-borders=\"true\"\n              :show-row-lines=\"false\"\n              :row-alternation-enabled=\"true\"\n            >\n              <DxColumn\n                data-field=\"visit_record_no\"\n                caption=\"Visit Record No.\"\n                sort-order=\"asc\"\n              />\n              <DxColumn data-field=\"client_name\" caption=\"Client Name\" />\n              <DxColumn data-field=\"travel_from\" caption=\"From\" />\n              <DxColumn data-field=\"travel_to\" caption=\"To\" />\n              <DxColumn\n                data-field=\"distance\"\n                caption=\"Distance\"\n                alignment=\"left\"\n              />\n              <DxColumn :width=\"80\" caption=\"\" cell-template=\"option-btn-set\" />\n\n              <template #option-btn-set=\"{ data }\">\n                <div class=\"table-btn-group\">\n                  <!-- <div class=\"table-btn\" v-on:click=\"VIEW_INFO(data)\">\n                    <i class=\"las la-search blue\"></i>\n                  </div> -->\n                  <div\n                    class=\"table-btn\"\n                    v-on:click=\"TOGGLE_POPUP('edit', data)\"\n                  >\n                    <i class=\"las la-pen green\"></i>\n                  </div>\n                  <div class=\"table-btn\" v-on:click=\"DELETE_ITEM(data)\">\n                    <i class=\"las la-trash red\"></i>\n                  </div>\n                </div>\n              </template>\n              <!-- Configuration goes here -->\n              <!-- <DxFilterRow :visible=\"true\" /> -->\n              <DxToolbar>\n                <DxItem location=\"before\" template=\"tableName\" />\n                <DxItem location=\"after\" template=\"addVisitRecord\" />\n              </DxToolbar>\n              <template #tableName>\n                <p class=\"page-intable-section-label\">Visiting Record</p>\n              </template>\n              <template #addVisitRecord>\n                <v-ons-toolbar-button v-on:click=\"TOGGLE_POPUP()\">\n                  <i class=\"las la-plus\"></i>\n                  <span>Add</span>\n                </v-ons-toolbar-button>\n              </template>\n              <DxScrolling mode=\"standard\" />\n              <DxSearchPanel :visible=\"true\" />\n              <DxPaging :page-size=\"10\" :page-index=\"0\" />\n              <DxPager\n                :show-page-size-selector=\"true\"\n                :allowed-page-sizes=\"[5, 10, 20]\"\n                :show-navigation-buttons=\"true\"\n                :show-info=\"true\"\n                info-text=\"Page {0} of {1} ({2} items)\"\n              />\n              <!-- <DxExport :enabled=\"true\" /> -->\n            </DxDataGrid>\n          </div>\n        </div>\n      </div>\n    </div>\n    <popupAdd :travelDate=\"this.info.date\" />\n    <popupEdit\n      v-if=\"isEdit == true\"\n      @closePopup=\"TOGGLE_POPUP()\"\n      @FETCH_INFO=\"FETCH_INFO()\"\n      :editInfo=\"info\"\n    />\n    <popupSign\n      v-if=\"isSign == true\"\n      :title=\"popupTitle\"\n      :signer=\"currentSigner\"\n      :info=\"this.info\"\n      @closePopup=\"TOGGLE_POPUP_SIGN()\"\n      @FETCH_INFO=\"FETCH_INFO()\"\n    />\n    <contentLoading\n      text=\"Loading, please wait...\"\n      v-if=\"isLoading == true\"\n      color=\"#fbcb04\"\n    />\n  </div>\n</template>\n\n<script>\n//DataGrid\nimport \"devextreme/dist/css/dx.light.css\";\nimport {\n  DxDataGrid,\n  DxSearchPanel,\n  DxPaging,\n  DxPager,\n  DxScrolling,\n  DxColumn,\n  DxToolbar,\n  DxItem,\n} from \"devextreme-vue/data-grid\";\n\n//Pages & Structures\nimport toolbar from \"@/components/app-structures/app-toolbar.vue\";\nimport popupAdd from \"@/views/Applications/Record/Travel/travel-detail-add.vue\";\nimport popupEdit from \"@/views/Applications/Record/Visiting/visiting-edit.vue\";\nimport contentLoading from \"@/components/app-structures/app-content-loading.vue\";\nimport approvalBox from \"@/components/app-structures/app-item-approval.vue\";\nimport moment from \"moment\";\n\n//API\nimport axios from \"/axios.js\";\nexport default {\n  name: \"ViewTravelInfo\",\n  components: {\n    DxDataGrid,\n    DxSearchPanel,\n    DxPaging,\n    DxPager,\n    DxScrolling,\n    DxColumn,\n    DxToolbar,\n    DxItem,\n    toolbar,\n    popupAdd,\n    popupEdit,\n    contentLoading,\n    approvalBox,\n  },\n  created() {\n    if (this.$store.state.status.server == true) this.FETCH_INFO();\n  },\n  data() {\n    return {\n      isLoading: false,\n      isAdd: false,\n      isEdit: false,\n      isSign: false,\n      sign_status: true,\n      info: \"\",\n      popupTitle: \"\",\n      TravelDetailList: [\n        {\n          id_travel_detail: 0,\n          id_travel: 2,\n          id_visit: 1,\n          visit_record_no: \"AI-CVR-09-22-01\",\n          travel_from: \"DEXON Main Office\",\n          travel_to: \"PTTLNG\",\n          distance: 24,\n          client_name: \"PTTLNG\",\n          treval_note: \"nothing to note krub\",\n        },\n        {\n          id_travel_detail: 1,\n          id_travel: 2,\n          id_visit: 2,\n          visit_record_no: \"AI-CVR-09-22-02\",\n          travel_from: \"PTTLNG\",\n          travel_to: \"PTTEP S1\",\n          distance: 76,\n          client_name: \"PTTEP S1\",\n          treval_note: \"\",\n        },\n        {\n          id_travel_detail: 2,\n          id_travel: 2,\n          id_visit: 3,\n          visit_record_no: \"AI-CVR-09-22-03\",\n          travel_from: \"PTTEP S1\",\n          travel_to: \"DEXON Main Office\",\n          distance: 96,\n          client_name: \"-\",\n          treval_note: \"\",\n        },\n      ],\n    };\n  },\n  methods: {\n    TOGGLE_POPUP_SIGN(opt) {\n      if (this.isSign == true) this.isSign = false;\n      if (opt == \"dexon\") {\n        this.popupTitle = \"Dexon Signature\";\n        this.currentSigner = \"dexon\";\n        this.isSign = true;\n      } else if (opt == \"client\") {\n        this.popupTitle = \"Client Signature\";\n        this.currentSigner = \"client\";\n        this.isSign = true;\n      }\n    },\n    FETCH_INFO() {\n      this.isLoading = true;\n      setTimeout(() => {\n        const id_travel = this.$route.params;\n        if (id_travel) {\n          axios({\n            method: \"post\",\n            url: \"/travel-record/travel-record-info\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: id_travel,\n          })\n            .then((res) => {\n              console.log(res);\n\n              if (res.status == 200 && res.data[0]) {\n                this.info = res.data[0];\n              } else {\n                this.$ons.notification.alert(\"No record found!\");\n              }\n            })\n            .catch((error) => {\n              this.$ons.notification.alert(\n                error.code + \" \" + error.response.status + \" \" + error.message\n              );\n            })\n            .finally(() => {\n              this.isLoading = false;\n            });\n        }\n      }, 500);\n    },\n    FETCH_INFO_LIST() {\n      this.isLoading = true;\n      setTimeout(() => {\n        const id_travel = this.$route.params;\n        if (id_travel) {\n          axios({\n            method: \"post\",\n            url: \"/travel-record/travel-record-info\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: id_travel,\n          })\n            .then((res) => {\n              console.log(res);\n\n              if (res.status == 200 && res.data[0]) {\n                this.info = res.data[0];\n              } else {\n                this.$ons.notification.alert(\"No record found!\");\n              }\n            })\n            .catch((error) => {\n              this.$ons.notification.alert(\n                error.code + \" \" + error.response.status + \" \" + error.message\n              );\n            })\n            .finally(() => {\n              this.isLoading = false;\n            });\n        }\n      }, 500);\n    },\n    DELETE_PROJECT() {\n      const id_visit = this.$route.params;\n      this.$ons.notification.confirm(\"Confirm delete?\").then((res) => {\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/visit-record/visit-record-delete\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: id_visit,\n          })\n            .then((res) => {\n              if (res.status == 200) {\n                this.$ons.notification.alert(\"Visit Record delete successful\");\n                this.$router.go(-1);\n              }\n            })\n            .catch((error) => {\n              this.$ons.notification.alert(\n                error.code + \" \" + error.response.status + \" \" + error.message\n              );\n            })\n            .finally(() => {});\n        }\n      });\n    },\n    TOGGLE_POPUP(option) {\n      if (option == \"add\") {\n        this.isAdd = !this.isAdd;\n      } else if (option == \"edit\") {\n        this.isEdit = !this.isEdit;\n      }\n    },\n    APPROVE_BTN(option) {\n      var user = JSON.parse(localStorage.getItem(\"user\"));\n      var alertText = \"N/A\";\n      var data = {\n        id_fuel_bill: this.currentViewRow.id_fuel_bill,\n        approve_status: 0,\n        id_user: user.id_user, //updater user\n      };\n      if (option == \"req_approve\") {\n        //send approve request 1--> 2\n        data.approve_status = 2;\n        alertText = \"Confirm Send Approve Request?\";\n      } else if (option == \"approve\") {\n        //feedback approve 2 --> 3\n        data.approve_status = 3;\n        alertText = \"Confirm Send Approve Feedback?\";\n      } else if (option == \"reject\") {\n        //feedback reject 2 --> 4\n        data.approve_status = 4;\n        alertText = \"Confirm Send Reject Feedback?\";\n      } else if (option == \"req_edit\") {\n        //feedback request edit 2 --> 5\n        data.approve_status = 5;\n        alertText = \"Confirm Send Request Edit Feedback?\";\n      }\n      this.$ons.notification.confirm(alertText).then((res) => {\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/fuel-bill/fuel-bill-status\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: data,\n          })\n            .then((res) => {\n              console.log(res);\n              if (res.status == 200) {\n                this.$ons.notification.alert(\"Approval Status Sent\");\n                this.FETCH_LIST();\n              }\n            })\n            .catch((error) => {\n              console.log(error);\n            })\n            .finally(() => {});\n        }\n      });\n    },\n  },\n  computed: {\n    travel_date() {\n      if (this.info.date) return moment(this.info.date).format(\"LL\");\n      return null;\n    },\n    created_date() {\n      if (this.info.created_time)\n        return moment(this.info.created_time).format(\"LLL\");\n      return null;\n    },\n    total_mile() {\n      const sum = this.TravelDetailList.reduce((accumulator, object) => {\n        return accumulator + object.distance;\n      }, 0);\n      return sum;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/main.scss\";\n.pm-page {\n  border: 1px solid #e6e6e6;\n  border-width: 0 0 0 1px;\n  background-color: #ffffff;\n  width: 100%;\n  height: calc(100vh - 78px);\n  display: grid;\n  grid-template-rows: 61px calc(100vh - 61px);\n\n  .pm-page-container {\n    background-color: #ffffff;\n    display: grid;\n    grid-template-columns: 100%;\n    height: calc(100% - 78px);\n    .page-content {\n      width: 100%;\n      height: calc(100vh - 139px);\n      // overflow-x: scroll;\n      overflow-y: scroll;\n      display: flex;\n      justify-content: flex-start;\n      flex-direction: column;\n      align-items: center;\n    }\n  }\n}\n.page-info {\n  width: 1024px;\n  height: 100%;\n  background: #fff;\n  padding: 20px;\n  position: relative;\n  padding-bottom: 100px;\n}\n\n.form-item-container {\n  // display: block;\n  display: grid;\n  grid-template-columns: repeat(3, 328px);\n  grid-gap: 0 20px;\n  padding-bottom: 20px;\n\n  @media screen and (max-width: 1280px) {\n    grid-template-columns: repeat(2, auto);\n  }\n  @media screen and (max-width: 768px) {\n    grid-template-columns: repeat(2, auto);\n  }\n  @media screen and (max-width: 425px) {\n    grid-template-columns: repeat(1, auto);\n  }\n}\n\n.toolbar-button {\n  background-color: #f6f6f6;\n  padding: 0;\n  padding-right: 15px;\n  height: 34px;\n  border: 0px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}