{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"/axios.js\";\nimport DxSelectBox from \"devextreme-vue/select-box\";\nimport DxDateBox from \"devextreme-vue/date-box\";\nimport clone from \"just-clone\";\nimport { DxLookup, DxDropDownOptions } from \"devextreme-vue/lookup\";\nexport default {\n  name: \"popup-edit-project\",\n  components: {\n    DxSelectBox,\n    DxDateBox,\n    DxLookup,\n    DxDropDownOptions\n  },\n  props: {\n    editInfo: Object\n  },\n\n  created() {\n    this.FETCH_DROPDOWN();\n    this.formData = clone(this.editInfo);\n  },\n\n  data() {\n    return {\n      formData: {\n        project_no: \"\",\n        project_name: \"\",\n        po_no: \"\",\n        quotation_no: \"\",\n        job_type: \"\",\n        job_confirm_date: \"\",\n        job_start_date: \"\",\n        job_end_date: \"\",\n        job_start_hour: \"\",\n        job_end_hour: \"\",\n        est_work_finish: \"\",\n        id_client: \"\",\n        client_contact_name: \"\",\n        client_contact_phone_no: \"\",\n        client_contact_email: \"\"\n      },\n      formSelect: {\n        jobType: [],\n        serviceTypeList: [],\n        now: new Date(),\n        clientList: [{}]\n      }\n    };\n  },\n\n  methods: {\n    SAVE() {\n      if (this.formData.project_name) {\n        if (this.formData.project_no) {\n          if (this.formData.id_client >= 0) {\n            this.$ons.notification.confirm(\"Confirm save?\").then(res => {\n              if (res == 1) {\n                const data = this.formData;\n                axios({\n                  method: \"put\",\n                  url: \"/project-manager/project-edit\",\n                  headers: {\n                    Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n                  },\n                  data: data\n                }).then(res => {\n                  if (res.status == 200) {\n                    this.$ons.notification.alert(\"Edit successful\");\n                    this.$emit(\"closePopup\");\n                    this.$emit(\"refreshInfo\");\n                  }\n                }).catch(error => {\n                  this.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n                }).finally(() => {});\n              }\n            });\n          } else {\n            this.$ons.notification.alert('\"Client\" field cannot be empty');\n          }\n        } else {\n          this.$ons.notification.alert('\"Project No\" field cannot be empty');\n        }\n      } else {\n        this.$ons.notification.alert('\"Project Name\" field cannot be empty');\n      }\n    },\n\n    CANCEL() {\n      if (this.formData != this.formData) {\n        this.$ons.notification.confirm(\"Your unsaved changes will be lost\").then(res => {\n          if (res == 1) {\n            this.$emit(\"closePopup\");\n          }\n        });\n      } else {\n        this.$emit(\"closePopup\");\n      }\n    },\n\n    FETCH_DROPDOWN() {\n      axios({\n        method: \"get\",\n        url: \"/project-manager/client-list\",\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n        }\n      }).then(res => {\n        if (res.data) {\n          this.formSelect.clientList = res.data;\n        }\n      });\n      axios({\n        method: \"get\",\n        url: \"/service-type/service-type-list\",\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n        }\n      }).then(res => {\n        if (res.data) {\n          this.formSelect.serviceTypeList = res.data;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACAA,4BADA;AAEAC;AACAC,eADA;AAEAC,aAFA;AAGAC,YAHA;AAIAC;AAJA,GAFA;AAQAC;AACAC;AADA,GARA;;AAWAC;AACA;AACA;AACA,GAdA;;AAeAC;AACA;AACAC;AACAC,sBADA;AAEAC,wBAFA;AAGAC,iBAHA;AAIAC,wBAJA;AAKAC,oBALA;AAMAC,4BANA;AAOAC,0BAPA;AAQAC,wBARA;AASAC,0BATA;AAUAC,wBAVA;AAWAC,2BAXA;AAYAC,qBAZA;AAaAC,+BAbA;AAcAC,mCAdA;AAeAC;AAfA,OADA;AAkBAC;AACAC,mBADA;AAEAC,2BAFA;AAGAC,uBAHA;AAIAC;AAJA;AAlBA;AAyBA,GAzCA;;AA0CAC;AACAC;AACA;AACA;AACA;AACA;AACA;AACA;AAEAC;AACAC,+BADA;AAEAC,sDAFA;AAGAC;AACAC,mCACA;AAFA,mBAHA;AAOA5B;AAPA,mBASA6B,IATA,CASAC;AACA;AACA;AACA;AACA;AACA;AACA,iBAfA,EAgBAC,KAhBA,CAgBAC;AACA,+CACAA,aACA,GADA,GAEAA,qBAFA,GAGA,GAHA,GAIAA,aALA;AAOA,iBAxBA,EAyBAC,OAzBA,CAyBA,QAzBA;AA0BA;AACA,aA/BA;AAgCA,WAjCA,MAiCA;AACA;AACA;AACA,SArCA,MAqCA;AACA;AACA;AACA,OAzCA,MAyCA;AACA;AACA;AACA,KA9CA;;AA+CAC;AACA;AACA,+BACAC,OADA,CACA,mCADA,EAEAN,IAFA,CAEAC;AACA;AACA;AACA;AACA,SANA;AAOA,OARA,MAQA;AACA;AACA;AACA,KA3DA;;AA4DAM;AACAZ;AACAC,qBADA;AAEAC,2CAFA;AAGAC;AACAC;AADA;AAHA,SAMAC,IANA,CAMAC;AACA;AACA;AACA;AACA,OAVA;AAWAN;AACAC,qBADA;AAEAC,8CAFA;AAGAC;AACAC;AADA;AAHA,SAMAC,IANA,CAMAC;AACA;AACA;AACA;AACA,OAVA;AAWA;;AAnFA;AA1CA","names":["name","components","DxSelectBox","DxDateBox","DxLookup","DxDropDownOptions","props","editInfo","created","data","formData","project_no","project_name","po_no","quotation_no","job_type","job_confirm_date","job_start_date","job_end_date","job_start_hour","job_end_hour","est_work_finish","id_client","client_contact_name","client_contact_phone_no","client_contact_email","formSelect","jobType","serviceTypeList","now","clientList","methods","SAVE","axios","method","url","headers","Authorization","then","res","catch","error","finally","CANCEL","confirm","FETCH_DROPDOWN"],"sourceRoot":"src/views/Applications/ProjectManager/Projects","sources":["project-edit.vue"],"sourcesContent":["<template>\n  <div class=\"popup-wrapper\">\n    <div class=\"popup-card\">\n      <div class=\"popup-header\">\n        <label>Edit Project Info</label>\n      </div>\n      <div class=\"popup-content form\">\n        <div class=\"form-item-container\">\n          <label class=\"section-text\" style=\"grid-column: span 2\"\n            >Project Informations</label\n          >\n\n          <div class=\"input-set\" style=\"grid-column: span 2\">\n            <div class=\"label-box\">\n              <p class=\"label\">Project Name:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <input\n              type=\"text\"\n              v-model=\"formData.project_name\"\n              placeholder=\"Project Name\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Project No:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <input\n              type=\"text\"\n              v-model=\"formData.project_no\"\n              placeholder=\"Project Number\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Project Value (Baht):</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <input\n              type=\"text\"\n              v-model=\"formData.project_value\"\n              placeholder=\"Project Value (Baht)\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Purchase Order No:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.po_no\"\n              placeholder=\"Purchase Order No\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Quotation No:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.quotation_no\"\n              placeholder=\"Quotation No\"\n            />\n          </div>\n\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Job Start Date:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <DxDateBox\n              :value=\"formSelect.now\"\n              type=\"date\"\n              v-model=\"formData.job_start_date\"\n              placeholder=\"Job Start Date\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Job End Date:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <DxDateBox\n              :value=\"formSelect.now\"\n              type=\"date\"\n              v-model=\"formData.job_end_date\"\n              placeholder=\"Job End Date\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Job Type:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.job_type\"\n              placeholder=\"Ex: H-N-D-RBI\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Service Type:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <DxSelectBox\n              style=\"border: 0; font-size: 14px\"\n              v-model=\"formData.service_type\"\n              :data-source=\"formSelect.serviceTypeList\"\n              display-expr=\"service_type_desc\"\n              value-expr=\"id_service_type\"\n            />\n          </div>\n          <label class=\"section-text\" style=\"grid-column: span 2\"\n            >Client Informations</label\n          >\n\n          <div class=\"input-set\">\n            <div class=\"label-box\">\n              <p class=\"label\">Client:</p>\n              <label class=\"star-label\"><i class=\"las la-asterisk\"></i></label>\n            </div>\n            <!-- <DxSelectBox\n              style=\"border: 0; font-size: 14px\"\n              :items=\"formSelect.clientList\"\n              placeholder=\"Select Client\"\n              v-model=\"formData.id_client\"\n              display-expr=\"client_name\"\n              value-expr=\"id_client\"\n              item-template=\"item\"\n            /> -->\n            <DxLookup\n              :items=\"formSelect.clientList\"\n              v-model=\"formData.id_client\"\n              formSelect.clientList\n              value=\"Select Client\"\n              value-expr=\"id_client\"\n              display-expr=\"client_name\"\n            >\n              <DxDropDownOptions :show-title=\"false\" />\n            </DxLookup>\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Contact Name:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.client_contact_name\"\n              placeholder=\"Contact Name\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Phone No:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.client_contact_phone_no\"\n              placeholder=\"Contact Phone No\"\n            />\n          </div>\n          <div class=\"input-set\">\n            <p class=\"label\">Email:</p>\n            <input\n              type=\"text\"\n              v-model=\"formData.client_contact_email\"\n              placeholder=\"Contact Email\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"popup-footer\">\n        <div class=\"button-set\">\n          <button class=\"blue\" v-on:click=\"SAVE()\">\n            <label>Save</label>\n          </button>\n          <button class=\"grey\" v-on:click=\"CANCEL()\">\n            <label>Cancel</label>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"/axios.js\";\nimport DxSelectBox from \"devextreme-vue/select-box\";\nimport DxDateBox from \"devextreme-vue/date-box\";\nimport clone from \"just-clone\";\nimport { DxLookup, DxDropDownOptions } from \"devextreme-vue/lookup\";\nexport default {\n  name: \"popup-edit-project\",\n  components: {\n    DxSelectBox,\n    DxDateBox,\n    DxLookup,\n    DxDropDownOptions,\n  },\n  props: {\n    editInfo: Object,\n  },\n  created() {\n    this.FETCH_DROPDOWN();\n    this.formData = clone(this.editInfo);\n  },\n  data() {\n    return {\n      formData: {\n        project_no: \"\",\n        project_name: \"\",\n        po_no: \"\",\n        quotation_no: \"\",\n        job_type: \"\",\n        job_confirm_date: \"\",\n        job_start_date: \"\",\n        job_end_date: \"\",\n        job_start_hour: \"\",\n        job_end_hour: \"\",\n        est_work_finish: \"\",\n        id_client: \"\",\n        client_contact_name: \"\",\n        client_contact_phone_no: \"\",\n        client_contact_email: \"\",\n      },\n      formSelect: {\n        jobType: [],\n        serviceTypeList: [],\n        now: new Date(),\n        clientList: [{}],\n      },\n    };\n  },\n  methods: {\n    SAVE() {\n      if (this.formData.project_name) {\n        if (this.formData.project_no) {\n          if (this.formData.id_client >= 0) {\n            this.$ons.notification.confirm(\"Confirm save?\").then((res) => {\n              if (res == 1) {\n                const data = this.formData;\n\n                axios({\n                  method: \"put\",\n                  url: \"/project-manager/project-edit\",\n                  headers: {\n                    Authorization:\n                      \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n                  },\n                  data: data,\n                })\n                  .then((res) => {\n                    if (res.status == 200) {\n                      this.$ons.notification.alert(\"Edit successful\");\n                      this.$emit(\"closePopup\");\n                      this.$emit(\"refreshInfo\");\n                    }\n                  })\n                  .catch((error) => {\n                    this.$ons.notification.alert(\n                      error.code +\n                        \" \" +\n                        error.response.status +\n                        \" \" +\n                        error.message\n                    );\n                  })\n                  .finally(() => {});\n              }\n            });\n          } else {\n            this.$ons.notification.alert('\"Client\" field cannot be empty');\n          }\n        } else {\n          this.$ons.notification.alert('\"Project No\" field cannot be empty');\n        }\n      } else {\n        this.$ons.notification.alert('\"Project Name\" field cannot be empty');\n      }\n    },\n    CANCEL() {\n      if (this.formData != this.formData) {\n        this.$ons.notification\n          .confirm(\"Your unsaved changes will be lost\")\n          .then((res) => {\n            if (res == 1) {\n              this.$emit(\"closePopup\");\n            }\n          });\n      } else {\n        this.$emit(\"closePopup\");\n      }\n    },\n    FETCH_DROPDOWN() {\n      axios({\n        method: \"get\",\n        url: \"/project-manager/client-list\",\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n        },\n      }).then((res) => {\n        if (res.data) {\n          this.formSelect.clientList = res.data;\n        }\n      });\n      axios({\n        method: \"get\",\n        url: \"/service-type/service-type-list\",\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n        },\n      }).then((res) => {\n        if (res.data) {\n          this.formSelect.serviceTypeList = res.data;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/main.scss\";\n// .popup-content {\n//   width: 100%;\n// }\n.form-item-container {\n  width: auto;\n  display: grid;\n  grid-template-columns: repeat(2, 300px);\n  grid-gap: 10px;\n}\n\n.dx-icon {\n  font-size: 24px;\n  color: blue;\n}\n\nhr {\n  grid-column: span 4 / auto;\n  margin-top: 10px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}