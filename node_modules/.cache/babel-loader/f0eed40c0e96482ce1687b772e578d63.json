{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//App Structure\nimport toolbar from \"@/components/app-structures/app-toolbar.vue\";\nimport popupEdit from \"@/views/Applications/ProjectManager/Projects/project-edit.vue\";\nimport DxDateBox from \"devextreme-vue/date-box\"; //API\n\nimport axios from \"/axios.js\"; // import moment from \"moment\";\n\nexport default {\n  name: \"ViewWeeklyReportInfo\",\n  components: {\n    toolbar: toolbar,\n    popupEdit: popupEdit,\n    DxDateBox: DxDateBox\n  },\n  created: function created() {\n    if (this.$store.state.status.server == true) this.FETCH_INFO();\n  },\n  data: function data() {\n    return {\n      info: {},\n      isEdit: false,\n      formSelect: {\n        now: new Date()\n      }\n    };\n  },\n  methods: {\n    FETCH_INFO: function FETCH_INFO() {\n      var _this = this;\n\n      var id_weekly = this.$route.params;\n\n      if (id_weekly) {\n        axios({\n          method: \"post\",\n          url: \"/weekly-report/get-weekly-report\",\n          headers: {\n            Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n          },\n          data: id_weekly\n        }).then(function (res) {\n          // console.log(res);\n          if (res.status == 200 && res.data[0]) {\n            _this.info = res.data[0];\n          }\n        }).catch(function (error) {\n          _this.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n        }).finally(function () {});\n      }\n    },\n    TOGGLE_POPUP: function TOGGLE_POPUP() {\n      this.isEdit = !this.isEdit;\n    },\n    SAVE_EDIT: function SAVE_EDIT() {\n      var _this2 = this;\n\n      this.$ons.notification.confirm(\"Confirm Save?\").then(function (res) {\n        var data = {\n          id_user: _this2.$store.state.user.id_user,\n          id_weekly: _this2.info.id_weekly,\n          report_message: _this2.info.report_message,\n          start_date: _this2.info.start_date,\n          end_date: _this2.info.end_date\n        };\n\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/weekly-report/weekly-report-edit\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: data\n          }).then(function (res) {\n            if (res.status == 200) {\n              _this2.$ons.notification.alert(\"Save Successful\");\n\n              _this2.FETCH_INFO();\n            }\n          }).catch(function (error) {\n            _this2.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n          }).finally(function () {});\n        }\n      });\n    },\n    DELETE: function DELETE() {\n      var _this3 = this;\n\n      this.$ons.notification.confirm(\"Confirm Delete Record?\").then(function (res) {\n        var data = {\n          id_weekly: _this3.info.id_weekly\n        };\n\n        if (res == 1) {\n          axios({\n            method: \"delete\",\n            url: \"/weekly-report/weekly-report-delete\",\n            headers: {\n              Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"token\"))\n            },\n            data: data\n          }).then(function (res) {\n            if (res.status == 200) {\n              _this3.$ons.notification.alert(\"Delete Successful\");\n\n              _this3.$router.go(-1);\n            }\n          }).catch(function (error) {\n            _this3.$ons.notification.alert(error.code + \" \" + error.response.status + \" \" + error.message);\n          }).finally(function () {});\n        }\n      });\n    }\n  },\n  computed: {\n    baseURL: function baseURL() {\n      var mode = this.$store.state.mode;\n      if (mode == \"dev\") return this.$store.state.modeURL.dev;else if (mode == \"prod\") return this.$store.state.modeURL.prod;else return console.log(\"develpment mode set up incorrect.\");\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA,gD,CAEA;;AACA,8B,CACA;;AACA;AACAA,8BADA;AAEAC;AACAC,oBADA;AAEAC,wBAFA;AAGAC;AAHA,GAFA;AAOAC,SAPA,qBAOA;AACA;AACA,GATA;AAUAC,MAVA,kBAUA;AACA;AACAC,cADA;AAEAC,mBAFA;AAGAC;AACAC;AADA;AAHA;AAOA,GAlBA;AAmBAC;AACAC,cADA,wBACA;AAAA;;AACA;;AACA;AACAC;AACAC,wBADA;AAEAC,iDAFA;AAGAC;AACAC,2BACA;AAFA,WAHA;AAOAX;AAPA,WASAY,IATA,CASA;AACA;AAEA;AACA;AACA;AACA,SAfA,EAgBAC,KAhBA,CAgBA;AACA,wCACAC,8DADA;AAGA,SApBA,EAqBAC,OArBA,CAqBA,cArBA;AAsBA;AACA,KA3BA;AA4BAC,gBA5BA,0BA4BA;AACA;AACA,KA9BA;AA+BAC,aA/BA,uBA+BA;AAAA;;AACA;AACA;AACAC,mDADA;AAEAC,0CAFA;AAGAC,oDAHA;AAIAC,4CAJA;AAKAC;AALA;;AAOA;AACAf;AACAC,yBADA;AAEAC,oDAFA;AAGAC;AACAC,6BACA;AAFA,aAHA;AAOAX;AAPA,aASAY,IATA,CASA;AACA;AACA;;AACA;AACA;AACA,WAdA,EAeAC,KAfA,CAeA;AACA,2CACAC,8DADA;AAGA,WAnBA,EAoBAC,OApBA,CAoBA,cApBA;AAqBA;AACA,OA/BA;AAgCA,KAhEA;AAiEAQ,UAjEA,oBAiEA;AAAA;;AACA;AACA;AACAJ;AADA;;AAGA;AACAZ;AACAC,4BADA;AAEAC,sDAFA;AAGAC;AACAC,6BACA;AAFA,aAHA;AAOAX;AAPA,aASAY,IATA,CASA;AACA;AACA;;AACA;AACA;AACA,WAdA,EAeAC,KAfA,CAeA;AACA,2CACAC,8DADA;AAGA,WAnBA,EAoBAC,OApBA,CAoBA,cApBA;AAqBA;AACA,OA3BA;AA4BA;AA9FA,GAnBA;AAmHAS;AACAC,WADA,qBACA;AACA;AACA,mEACA,+DACA;AACA;AANA;AAnHA","names":["name","components","toolbar","popupEdit","DxDateBox","created","data","info","isEdit","formSelect","now","methods","FETCH_INFO","axios","method","url","headers","Authorization","then","catch","error","finally","TOGGLE_POPUP","SAVE_EDIT","id_user","id_weekly","report_message","start_date","end_date","DELETE","computed","baseURL"],"sourceRoot":"src/views/Applications/ExecutiveManagement/WeeklyReport","sources":["WeeklyReportInfo.vue"],"sourcesContent":["<template>\n  <div class=\"pm-page\">\n    <div class=\"pm-toolbar\">\n      <toolbar\n        :pageSubName=\"'Record No. ' + info.record_no\"\n        :isBack=\"true\"\n        :isSave=\"true\"\n        :isDelete=\"true\"\n        @isDeleteBtn=\"DELETE()\"\n        @isSaveBtn=\"SAVE_EDIT()\"\n        @refreshInfo=\"FETCH_INFO()\"\n      />\n    </div>\n    <div class=\"pm-page-container\">\n      <div class=\"page-content\">\n        <div class=\"page-report\">\n          <div class=\"form\">\n            <div class=\"form-item-container\">\n              <div class=\"input-set\">\n                <div class=\"label-box\">\n                  <p class=\"label\">Start Date:</p>\n                  <span class=\"star-label\"\n                    ><i class=\"las la-asterisk\"></i\n                  ></span>\n                </div>\n                <DxDateBox\n                  :value=\"formSelect.now\"\n                  type=\"date\"\n                  v-model=\"info.start_date\"\n                  placeholder=\"Start Date\"\n                />\n              </div>\n              <div class=\"input-set\">\n                <div class=\"label-box\">\n                  <p class=\"label\">End Date:</p>\n                  <span class=\"star-label\"\n                    ><i class=\"las la-asterisk\"></i\n                  ></span>\n                </div>\n                <DxDateBox\n                  :value=\"formSelect.now\"\n                  type=\"date\"\n                  v-model=\"info.end_date\"\n                  placeholder=\"End Date\"\n                />\n              </div>\n            </div>\n          </div>\n          <!-- <wysiwyg class=\"text-editor\" v-model=\"info.report_message\" /> -->\n\n          <mc-wysiwyg\n            class=\"text-editor\"\n            v-model=\"info.report_message\"\n          ></mc-wysiwyg>\n        </div>\n      </div>\n    </div>\n    <popupEdit\n      v-if=\"isEdit == true\"\n      @closePopup=\"TOGGLE_POPUP()\"\n      @refreshInfo=\"FETCH_INFO()\"\n      :editInfo=\"info\"\n    />\n  </div>\n</template>\n\n<script>\n//App Structure\nimport toolbar from \"@/components/app-structures/app-toolbar.vue\";\nimport popupEdit from \"@/views/Applications/ProjectManager/Projects/project-edit.vue\";\nimport DxDateBox from \"devextreme-vue/date-box\";\n\n//API\nimport axios from \"/axios.js\";\n// import moment from \"moment\";\nexport default {\n  name: \"ViewWeeklyReportInfo\",\n  components: {\n    toolbar,\n    popupEdit,\n    DxDateBox,\n  },\n  created() {\n    if (this.$store.state.status.server == true) this.FETCH_INFO();\n  },\n  data() {\n    return {\n      info: {},\n      isEdit: false,\n      formSelect: {\n        now: new Date(),\n      },\n    };\n  },\n  methods: {\n    FETCH_INFO() {\n      const id_weekly = this.$route.params;\n      if (id_weekly) {\n        axios({\n          method: \"post\",\n          url: \"/weekly-report/get-weekly-report\",\n          headers: {\n            Authorization:\n              \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n          },\n          data: id_weekly,\n        })\n          .then((res) => {\n            // console.log(res);\n\n            if (res.status == 200 && res.data[0]) {\n              this.info = res.data[0];\n            }\n          })\n          .catch((error) => {\n            this.$ons.notification.alert(\n              error.code + \" \" + error.response.status + \" \" + error.message\n            );\n          })\n          .finally(() => {});\n      }\n    },\n    TOGGLE_POPUP() {\n      this.isEdit = !this.isEdit;\n    },\n    SAVE_EDIT() {\n      this.$ons.notification.confirm(\"Confirm Save?\").then((res) => {\n        const data = {\n          id_user: this.$store.state.user.id_user,\n          id_weekly: this.info.id_weekly,\n          report_message: this.info.report_message,\n          start_date: this.info.start_date,\n          end_date: this.info.end_date,\n        };\n        if (res == 1) {\n          axios({\n            method: \"put\",\n            url: \"/weekly-report/weekly-report-edit\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: data,\n          })\n            .then((res) => {\n              if (res.status == 200) {\n                this.$ons.notification.alert(\"Save Successful\");\n                this.FETCH_INFO();\n              }\n            })\n            .catch((error) => {\n              this.$ons.notification.alert(\n                error.code + \" \" + error.response.status + \" \" + error.message\n              );\n            })\n            .finally(() => {});\n        }\n      });\n    },\n    DELETE() {\n      this.$ons.notification.confirm(\"Confirm Delete Record?\").then((res) => {\n        const data = {\n          id_weekly: this.info.id_weekly,\n        };\n        if (res == 1) {\n          axios({\n            method: \"delete\",\n            url: \"/weekly-report/weekly-report-delete\",\n            headers: {\n              Authorization:\n                \"Bearer \" + JSON.parse(localStorage.getItem(\"token\")),\n            },\n            data: data,\n          })\n            .then((res) => {\n              if (res.status == 200) {\n                this.$ons.notification.alert(\"Delete Successful\");\n                this.$router.go(-1);\n              }\n            })\n            .catch((error) => {\n              this.$ons.notification.alert(\n                error.code + \" \" + error.response.status + \" \" + error.message\n              );\n            })\n            .finally(() => {});\n        }\n      });\n    },\n  },\n  computed: {\n    baseURL() {\n      var mode = this.$store.state.mode;\n      if (mode == \"dev\") return this.$store.state.modeURL.dev;\n      else if (mode == \"prod\") return this.$store.state.modeURL.prod;\n      else return console.log(\"develpment mode set up incorrect.\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/main.scss\";\n.pm-page {\n  border: 1px solid #e6e6e6;\n  border-width: 0 0 0 1px;\n  width: 100%;\n  height: calc(100vh - 78px);\n  display: grid;\n  grid-template-rows: 61px calc(100vh - 61px);\n\n  .pm-page-container {\n    background-color: #d9d9d9;\n\n    .page-content {\n      height: calc(100vh - 139px);\n      overflow-x: hidden;\n      overflow-y: scroll;\n      display: block;\n\n      .page-report {\n        width: 1280px;\n        // background-color: #fff;\n        margin: 0 auto;\n\n        @media screen and (max-width: 1920px) {\n          width: 1280px;\n        }\n        @media screen and (max-width: 1600px) {\n          width: calc(100% - 80px);\n          padding: 0 20px;\n        }\n\n        margin-top: 40px;\n        h2 {\n          margin: 0;\n          font-size: 20px;\n          font-style: normal;\n          text-transform: uppercase;\n          font-family: \"Play\", \"Noto Sans Thai\" !important;\n        }\n\n        background-color: #fff;\n        padding: 20px;\n        margin-top: 20px;\n        margin-bottom: 60px;\n        box-shadow: 0 4px 12px -2px rgb(107 117 161 / 16%);\n        border-radius: 6px;\n        min-height: 200px;\n        height: fit-content;\n      }\n    }\n  }\n}\nh1 {\n  font-size: 2em;\n}\n\n.text-editor {\n  font-family: \"Calibri\";\n  font-size: 16px;\n  height: 500px;\n  overflow-y: scroll;\n}\n\n.form-item-container {\n  display: grid;\n  width: 100%;\n  grid-template-columns: auto auto;\n  grid-gap: 20px;\n  margin-bottom: 20px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}